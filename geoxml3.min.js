function KMLObj(e,t,s,i){this.title=e,this.description=escape(t),this.marks=[],this.folders=[],this.groundOverlays=[],this.open=s,this.folderid=i}function Lance$(e){return document.getElementById(e)}function GeoXml(e,t,s,i){if(this.myvar=e,this.opts=i||{},this.map=t,this.map.geoxml=this,this.url=s,"string"==typeof s?this.urls=[s]:(this.urls=s,this.url=this.url[0]),i.openbyid&&(this.openbyid=i.openbyid),i.openbyname&&(this.openbyname=i.openbyname),this.showLabels=this.opts.showLabels||!0,this.alwayspop=this.opts.alwaysinfopop||!1,this.veryquiet=this.opts.veryquiet||!1,this.quiet=this.opts.quiet||!1,this.suppressFolders=this.opts.suppressallfolders||!1,this.rectangleLegend=this.opts.simplelegend||!1,this.titlestyle=this.opts.titlestyle||'style = "font-family: arial, sans-serif;font-size: medium;font-weight:bold;"',this.descstyle=this.opts.descstyle||'style = "font-family: arial, sans-serif;font-size: small;padding-bottom:.7em;"',this.opts.directionstyle&&"undefined"!=typeof this.opts.directionstyle?this.directionstyle=this.opts.directionstyle:this.directionstyle='style="font-family: arial, sans-serif;font-size: small;padding-left: 1px;padding-top: 1px;padding-right: 4px;"',this.sidebarfn=this.opts.sidebarfn||GeoXml.addSidebar,this.pointlabelopacity=this.opts.pointlabelopacity||100,this.polylabelopacity=this.opts.polylabelopacity||100,this.hilite=this.opts.hilite||{color:"#aaffff",opacity:.3,textcolor:"#000000"},this.latestsidebar="",this.forcefoldersopen=!1,"undefined"!=typeof this.opts.allfoldersopen&&(this.forcefoldersopen=this.opts.allfoldersopen),this.iwmethod=this.opts.iwmethod||"click",this.linkmethod=this.opts.linkmethod||"dblclick",this.linktarget=this.opts.linktarget||"_self",this.contentlinkmarkers=!1,"boolean"==typeof this.opts.contentlinkmarkers&&(this.contentlinkmarkers=this.opts.contentlinkmarkers),this.extcontentmarkers=!1,"boolean"==typeof this.opts.extcontentmarkers&&(this.extcontentmarkers=this.opts.extcontentmarkers),this.dohilite=!0,"undefined"!=typeof this.opts.dohilite&&0==this.opts.dohilite&&(this.dohilite=!1),this.clickablepolys=!0,this.zoomHere=15,"number"==typeof this.opts.zoomhere&&(this.zoomHere=this.opts.zoomhere),"boolean"==typeof this.opts.clickablepolys&&(this.clickablepolys=this.opts.clickablepolys),this.clickablemarkers=!0,"boolean"==typeof this.opts.clickablemarkers&&(this.clickablemarkers=this.opts.clickablemarkers),this.opendivmarkers="","string"==typeof this.opts.opendivmarkers&&(this.opendivmarkers=this.opts.opendivmarkers),this.opts.singleInfoWindow=!0,this.opts.singleInfoWindow&&google.maps.event.addListener(t,"click",function(){this.geoxml.lastMarker.infoWindow.getMap()&&this.geoxml.lastMarker.infoWindow.close(),this.geoxml.lastmarker=null}),this.clickablelines=!0,"boolean"==typeof this.opts.clickablelines&&(this.clickablelines=this.opts.clickablelines),"undefined"!=typeof this.opts.nolegend&&(this.nolegend=!0),"undefined"==typeof this.opts.preloadHTML&&(this.opts.preloadHTML=!0),this.sidebariconheight=16,"number"==typeof this.opts.sidebariconheight&&(this.sidebariconheight=this.opts.sidebariconheight),this.sidebarsnippet=!1,"boolean"==typeof this.opts.sidebarsnippet&&(this.sidebarsnippet=this.opts.sidebarsnippet),this.hideall=!1,this.opts.hideall&&(this.hideall=this.opts.hideall),this.opts.markerpane&&"undefined"!=typeof this.opts.markerpane)this.markerpane=this.opts.markerpane;else{var o=document.createElement("div");o.style.border="",o.style.position="absolute",o.style.padding="0px",o.style.margin="0px",o.style.fontSize="0px",o.zIndex=1001,this.markerpane=o,this.markerpaneOnMap=!1}"undefined"!=typeof proxy&&(this.proxy=proxy),this.opts.token&&this.opts.id?this.token="&"+this.opts.token+"=1&id="+this.opts.id:this.token="",this.proxy||"undefined"==typeof getcapproxy||fixUrlEnd&&(getcapproxy=fixUrlEnd(getcapproxy)),this.publishdirectory="http://www.dyasdesigns.com/tntmap/",topwin=top;try{topname=top.title}catch(r){topwin=self}topwin.publishdirectory&&(this.publishdirectory=topwin.publishdirectory),topwin.standalone&&(this.publishdirectory=""),this.kmlicon=this.publishdirectory+"images/ge.png",this.docicon=this.publishdirectory+"images/ge.png",this.docclosedicon=this.publishdirectory+"images/geclosed.png",this.foldericon=this.publishdirectory+"images/folder.png",this.folderclosedicon=this.publishdirectory+"images/folderclosed.png",this.gmlicon=this.publishdirectory+"images/geo.gif",this.rssicon=this.publishdirectory+"images/rssb.png",this.globalicon=this.publishdirectory+"images/geo.gif",this.WMSICON='<img src="'+this.publishdirectory+'images/geo.gif" style="border:none" />',GeoXml.WMSICON=this.WMSICON,this.baseLayers=[],this.bounds=new google.maps.LatLngBounds,this.style={width:2,opacity:.75,fillopacity:.4},this.style.color=this.randomColor(),this.style.fillcolor=this.randomColor(),this.iwwidth=this.opts.iwwidth||400,this.maxiwwidth=this.opts.maxiwwidth||0,this.iwheight=this.opts.iwheight||0,this.lastMarker={},this.verySmall=1e-7,this.progress=0,this.ZoomFactor=2,this.NumLevels=18,this.maxtitlewidth=0,this.styles=[],this.currdeschead="",this.jsdocs=[],this.jsonmarks=[],this.polyset=[],this.polygons=[],this.polylines=[],this.multibounds=[],"undefined"==typeof this.opts.clustering&&(this.opts.clustering={}),"undefined"==typeof this.opts.clustering.lang&&(this.opts.clustering.lang={txtzoomin:"Zoom In",txtclustercount1:"...and",txtclustercount2:"more"}),this.overlayman=new OverlayManager(t,this,this.opts.clustering),this.overlayman.rowHeight=20,this.opts.sidebarid&&(this.basesidebar=this.opts.sidebarid),this.kml=[new KMLObj("GeoXML","",!0,0)],this.overlayman.folders.push([]),this.overlayman.subfolders.push([]),this.overlayman.folderhtml.push([]),this.overlayman.folderhtmlast.push(0),this.overlayman.folderBounds.push(new google.maps.LatLngBounds),this.wmscount=0,this.unnamedpath="un-named path",this.unnamedplace="un-named place",this.unnamedarea="un-named area","undefined"==typeof this.opts.inputsize?this.inputsize=35:this.inputsize=this.opts.inputsize,"undefined"==typeof this.opts.lang?(this.lang={},this.lang.txtdir="Get Directions:",this.lang.txtto="To Here",this.lang.txtfrom="From Here",this.lang.txtsrchnrby="Search nearby",this.lang.txtzoomhere="Zoom Here",this.lang.txtaddrstart="Start address:",this.lang.txtgetdir="Go",this.lang.txtback="&#171; Back",this.lang.txtsearchnearby='Search nearby: e.g. "pizza"',this.lang.txtsearch="Go"):this.lang=this.opts.lang}function OverlayManagerView(e){this.setMap(e)}function ClusterIcon(e,t){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=e,this.className_=e.getMarkerClusterer().getClusterClass(),this.styles_=t,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(e.getMap()),this.onMap=!0}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinimumClusterSize(),this.averageCenter_=e.getAverageCenter(),this.printable_=e.getPrintable(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles())}function MarkerClusterer(e,t,s,i){this.extend(MarkerClusterer,google.maps.OverlayView),t=t||[],s=s||{},this.paren=this.paren,this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.overlayman=s.overlayman,this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.ClusterZoom_=s.ClusterZoom||"dblclick",this.ClusterInfoWindow_=s.ClusterInfoWindow||"click",this.styles_=s.styles||[],this.title_=s.title||"",this.zoomOnClick_=!0,void 0!==s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,void 0!==s.averageCenter&&(this.averageCenter_=s.averageCenter),this.ignoreHidden_=!1,void 0!==s.ignoreHidden&&(this.ignoreHidden_=s.ignoreHidden),this.printable_=!1,void 0!==s.printable&&(this.printable_=s.printable),this.imagePath_=s.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=s.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=s.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=s.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=s.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=s.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=s.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(t,!0),this.setMap(e)}("undefined"==typeof console||"undefined"==typeof console.log)&&(console={},console.log=function(){});var topwin=self,G=google.maps;GeoXml.prototype.setOpacity=function(e){this.opts.overrideOpacity=e;for(var t=0;t<this.overlayman.markers.length;t++){var s=this.overlayman.markers[t];s.getPaths?(this.overlayman.markers[t].fillOpacity=e,this.overlayman.markers[t].setOptions({fillOpacity:e})):s.getPath&&(this.overlayman.markers[t].strokeOpacity=e,this.overlayman.markers[t].setOptions({strokeOpacity:e}))}},GeoXml.stripHTML=function(e){return e.replace(/(<([^>]+)>)/gi,"")},GeoXml.prototype.showIt=function(e,t,s){var i,o="status=yes,resizable=yes,toolbar=0,height="+t+",width="+t+",scrollbars=yes";topwin.widget?alert(e):(i=window.open("","_blank",o),i.document.open("text/xml"),i.document.write(e),i.document.close())},GeoXml.prototype.clear=function(){for(var e=0;e<this.overlayman.markers.length;e++)this.overlayman.RemoveMarker(this.overlayman.markers[e]);this.kml=[new KMLObj("GeoXML","",!0,0)],this.maxtitlewidth=0,this.styles=[],this.jsdocs=[],this.jsonmarks=[],this.polyset=[],this.polylines=[],this.multibounds=[],this.bounds=new google.maps.LatLngBounds,this.overlayman=new OverlayManager(this.map,this,this.opts.clustering),this.overlayman.rowHeight=20,"undefined"!=typeof this.basesidebar&&""!=this.basesidebar&&(Lance$(this.basesidebar).innerHTML=""),this.currdeschead="",this.overlayman.folders.push([]),this.overlayman.subfolders.push([]),this.overlayman.folderhtml.push([]),this.overlayman.folderhtmlast.push(0),this.overlayman.byname=[],this.overlayman.byid=[],this.filteredNames=[],this.folderCBNames=[],this.overlayman.folderBounds.push(new google.maps.LatLngBounds),this.wmscount=0},GeoXml.prototype.createMarkerJSON=function(e,t){var s=this,i=s.makeIcon(i,e.href),o=new google.maps.LatLng(e.y,e.x);s.overlayman.folderBounds[t].extend(o),s.bounds.extend(o),e.shadow?i.shadow=e.shadow:i.shadow=null,s.opts.createmarker?s.opts.createmarker(o,e.title,unescape(e.description),null,t,i,e.visibility,e.id,e.href,e.snip):s.createMarker(o,e.title,unescape(e.description),null,t,i,e.visibility,e.id,e.href,e.snip)},GeoXml.prototype.createMarker=function(point,name,desc,styleid,idx,instyle,visible,kml_id,markerurl,snip){var myvar=this.myvar,icon,shadow,href,scale=1;instyle&&instyle.scale&&(scale=instyle.scale);var bicon;if(instyle&&("undefined"==typeof instyle.url||""==instyle.url)&&this.showLabels){7>12*scale&&(scale=.6);var fs=12*scale+"px",style={fontSize:fs,fontFamily:"Verdana, Arial, Sans-serif"};instyle&&instyle.textColor&&(style.color=instyle.textColor);var m=new GeoXml.Label(point,name,"",this.map,style);m.title=name,m.id=kml_id;var obj={type:"point",title:name,description:name,href:href,shadow:shadow,visibility:visible,x:point.x,y:point.y,id:m.id};this.kml[idx].marks.push(obj);var parm,blob='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" width="16px" height="16px">';blob+='<text stroke="#bfb3b3" transform="matrix(0.757796 0 0 0.757796 0.200575 4.77596)" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_15" y="12.958634" x="7.370384" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" fill="'+style.color+'">A</text>',blob+='<text stroke="#bfb3b3" transform="matrix(0.781022 0 0 0.781022 2.09056 3.86291)" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_16" y="8.571944" x="13.233881" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" fill="'+style.color+'">a</text>',blob+="</svg>";var desc2="";return this.tileset?(parm=this.tileset+"$$$"+name+"$$$marker$$$"+n+"$$$"+blob+"$$$"+visible+"$$$null$$$"+desc2,m.sidebarid=this.tileset+"sb"+n):(parm=this.myvar+"$$$"+name+"$$$marker$$$"+n+"$$$"+blob+"$$$"+visible+"$$$null$$$"+desc2,m.sidebarid=this.myvar+"sb"+n),void(this.opts.addmarker?this.opts.addmarker(m,name,idx,parm,visible):this.overlayman.addMarker(m,name,idx,parm,visible))}if(instyle)bicon=instyle;else var bicon=new google.maps.MarkerImage("http://maps.google.com/mapfiles/kml/pal3/icon40.png",new google.maps.Size(32*scale,32*scale),new google.maps.Point(0,0),new google.maps.Point(16*scale,16*scale),new google.maps.Size(32*scale,32*scale));if(this.opts.baseicon&&(bicon.size=this.opts.baseicon.size,bicon.origin=this.opts.baseicon.origin,bicon.anchor=this.opts.baseicon.anchor,scale?instyle&&(bicon.scaledSize=instyle.scaledSize):bicon.scaledSize=this.opts.baseicon.scaledSize,scale=1),icon=bicon,this.opts.iconFromDescription){for(var text=desc,pattern=new RegExp("<\\s*img","ig"),result,pattern2=/src\s*=\s*[\'\"]/,pattern3=/[\'\"]/;null!=(result=pattern.exec(text));){var stuff=text.substr(result.index),result2=pattern2.exec(stuff);if(null!=result2){stuff=stuff.substr(result2.index+result2[0].length);var result3=pattern3.exec(stuff);if(null!=result3){var imageUrl=stuff.substr(0,result3.index);href=imageUrl}}}shadow=null,href||(href="http://maps.google.com/mapfiles/kml/pal3/icon40.png"),icon=bicon,bicon.size=null,bicon.scaledSize=new google.maps.Size(32*scale,32*scale),icon.url=href}else href="http://maps.google.com/mapfiles/kml/pal3/icon40",null==instyle||"undefined"==typeof instyle?(shadow=href+"s.png",href+=".png",this.opts.baseicon&&(href=this.opts.baseicon.url)):instyle.url&&(href=instyle.url),icon=bicon,icon.url=href;var iwoptions=this.opts.iwoptions||{},markeroptions=this.opts.markeroptions||{},icontype=this.opts.icontype||"style";if("style"==icontype){var blark=this.styles[styleid];blark&&(icon=bicon,icon.url=blark.url,icon.anchor=blark.anchor,href=blark.url)}if(markeroptions.icon=icon,this.contentlinkmarkers)for(var text=desc,pattern=new RegExp("<\\s*a","ig"),result,pattern2=/href\s*=\s*[\'\"]/,pattern3=/[\'\"]/;null!=(result=pattern.exec(text));){var stuff=text.substr(result.index),result2=pattern2.exec(stuff);if(null!=result2){stuff=stuff.substr(result2.index+result2[0].length);var result3=pattern3.exec(stuff);if(null!=result3)var urlLink=stuff.substr(0,result3.index)}}if(this.extcontentmarkers){for(var contentUrl=Array(),text=desc,pattern=new RegExp("<\\s*object","ig"),result,pattern1=/<\/\s*object>/i,pattern2=/data\s*=\s*[\'\"]/,pattern3=/[\'\"]/,x=0;null!=(result=pattern.exec(text));){var stuff=text.substr(result.index),result1=pattern1.exec(stuff),result2=pattern2.exec(stuff);if(null!=result2){var stuff2=stuff.substr(result2.index+result2[0].length),result3=pattern3.exec(stuff2);if(null!=result3){var urlLink=stuff2.substr(0,result3.index);urlLink=urlLink.replace("http://",""),contentUrl[x]=urlLink,text=text.substr(0,result.index)+"<span id='geoxmlobjcont"+x+"'></span>"+stuff.substr(result1.index+result1[0].length,stuff.length),x++}}}desc=text}var start=icon.url.substring(0,4);if(start.match(/^http/i)||"/"==start.substr(0,1));else if("string"==typeof this.url){var slash=this.url.lastIndexOf("/"),changed=!1,subchanged=!1,newurl;for(-1!=slash&&(newurl=this.url.substring(0,slash),changed=!0,slash=0);-1!=slash&&icon.url.match(/^..\//);)slash=newurl.lastIndexOf("/"),icon.url=icon.url.substring(3),-1!=slash&&(newurl=newurl.substring(0,slash)),changed=!0;""!=newurl&&icon.url.match(/^..\//)&&(newurl="",icon.url=icon.url.substring(3)),""==newurl?markeroptions.icon.url=icon.url:markeroptions.icon.url=newurl+"/"+icon.url}var ta=document.createElement("textarea");ta.innerHTML=name,name=ta.value,markeroptions.title=name,markeroptions.clickable=!0,markeroptions.pane=this.markerpane,markeroptions.position=point;var m=new google.maps.Marker(markeroptions);m.id=kml_id,m.urlLink=urlLink,m.geoxml=this;var obj={type:"point",title:name,description:escape(desc),href:href,shadow:shadow,visibility:visible,x:point.x,y:point.y,id:m.id};if(this.kml[idx].marks.push(obj),this.opts.pointlabelclass){var l=new ELabel(point,name,this.opts.pointlabelclass,this.opts.pointlabeloffset,this.pointlabelopacity,!0);m.label=l,l.setMap(this.map)}var html,html1,html2,html3,html4;html="<h1 "+this.titlestyle+">"+name+"</h1>",name!=desc&&(html+="<div "+this.descstyle+">"+desc+"</div>");var html1;if(this.opts.directions?(html1=html+"<div "+this.directionstyle+">"+this.lang.txtdir+' <a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click2');return false;\">"+this.lang.txtto+'</a> - <a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click3');return false;\">"+this.lang.txtfrom+'</a><br><a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click4');return false;\">"+this.lang.txtsrchnrby+'</a> | <a href="#" onclick="'+this.myvar+".map.setCenter(new google.maps.LatLng("+point.lat()+","+point.lng()+"));"+this.myvar+".map.setZoom("+this.zoomHere+');return false;">'+this.lang.txtzoomhere+"</a></div>",html2=html+"<div "+this.directionstyle+">"+this.lang.txtdir+" "+this.lang.txtto+' - <a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click3');return false;\">"+this.lang.txtfrom+"</a><br>"+this.lang.txtaddrstart+'<form action="http://maps.google.com/maps" method="get" target="_blank"><input type="text" SIZE='+this.inputsize+' MAXLENGTH=80 name="saddr" id="saddr" value="" /><INPUT value="'+this.lang.txtgetdir+'" TYPE="SUBMIT"><input type="hidden" name="daddr" value="'+point.lat()+","+point.lng()+"("+name+')"/><br><a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click1');return false;\">"+this.lang.txtback+'</a> | <a href="#" onclick="'+this.myvar+".map.setCenter(new google.maps.LatLng("+point.lat()+","+point.lng()+"));"+this.myvar+".map.setZoom("+this.zoomHere+');return false;">'+this.lang.txtzoomhere+"</a></div>",html3=html+"<div "+this.directionstyle+">"+this.lang.txtdir+' <a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click2');return false;\">"+this.lang.txtto+"</a> - "+this.lang.txtfrom+"<br>"+this.lang.txtaddrstart+'<form action="http://maps.google.com/maps" method="get" target="_blank"><input type="text" SIZE='+this.inputsize+' MAXLENGTH=80 name="daddr" id="daddr" value="" /><INPUT value="'+this.lang.txtgetdir+'" TYPE="SUBMIT"><input type="hidden" name="saddr" value="'+point.lat()+","+point.lng()+"("+name+')"/><br><a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click1');return false;\">"+this.lang.txtback+'</a> | <a href="#" onclick="'+this.myvar+".map.setCenter(new google.maps.LatLng("+point.lat()+","+point.lng()+"));"+this.myvar+".map.setZoom("+this.zoomHere+');return false;">'+this.lang.txtzoomhere+"</a></div>",html4=html+"<div "+this.directionstyle+">"+this.lang.txtsearchnearby+'<br><form action="http://maps.google.com/maps" method="get" target="_blank"><input type="text" SIZE='+this.inputsize+' MAXLENGTH=80 name="q" id="q" value="" /><INPUT value="'+this.lang.txtsearch+'" TYPE="SUBMIT"><input type="hidden" name="near" value="'+name+" @"+point.lat()+","+point.lng()+'"/><br><a href="#" onclick="google.maps.event.trigger('+this.myvar+".lastMarker,'click1');return false;\">"+this.lang.txtback+'</a> | <a href="#" onclick="'+this.myvar+".map.setCenter(new google.maps.LatLng("+point.lat()+","+point.lng()+"));"+this.myvar+".map.setZoom("+this.zoomHere+');return false;">'+this.lang.txtzoomhere+"</a></div>",google.maps.event.addListener(m,"click1",function(){var e={content:html1,pixelOffset:new google.maps.Size(0,2)};this.geoxml.maxiwwidth&&(e.maxWidth=this.geoxml.maxiwwidth),m.infoWindow.setOptions(e)}),google.maps.event.addListener(m,"click2",function(){var e={content:html2,pixelOffset:new google.maps.Size(0,2)};this.geoxml.maxiwwidth&&(e.maxWidth=this.geoxml.maxiwwidth),m.infoWindow.setOptions(e)}),google.maps.event.addListener(m,"click3",function(){var e={content:html3,pixelOffset:new google.maps.Size(0,2)};this.geoxml.maxiwwidth&&(e.maxWidth=this.geoxml.maxiwwidth),m.infoWindow.setOptions(e)}),google.maps.event.addListener(m,"click4",function(){var e={content:html4,pixelOffset:new google.maps.Size(0,2)};this.geoxml.maxiwwidth&&(e.maxWidth=this.geoxml.maxiwwidth),m.infoWindow.setOptions(e)})):html1=html,this.opts.markerfollowlinks)markerurl&&"string"==typeof markerurl&&""!=markerurl&&(m.url=markerurl,google.maps.event.addListener(m,this.linkmethod,function(){"_blank"==m.geoxml.linktarget&&window.open(m.url),"_self"==m.geoxml.linktarget&&(document.location=m.url);try{eval(myvar+".lastMarker = m")}catch(err){}}));else if(this.clickablemarkers){m.geoxml=this;var infoWindowOptions={content:html1+"</div>",pixelOffset:new google.maps.Size(0,2)};m.geoxml.maxiwwidth&&(infoWindowOptions.maxWidth=m.geoxml.maxiwwidth),m.infoWindow=new google.maps.InfoWindow(infoWindowOptions);var parserOptions=this.opts;google.maps.event.addListener(m,this.iwmethod,function(){m!=m.geoxml.lastMarker&&(m.geoxml.opts.singleInfoWindow&&(m.geoxml.lastMarker&&m.geoxml.lastMarker.infoWindow&&(m.geoxml.lastMarker.onMap||m.geoxml.lastMarker.setMap(m.geoxml.map),m.geoxml.lastMarker.infoWindow.close(),m.geoxml.lastMarker.onMap||m.geoxml.lastMarker.setMap(null)),OverlayManager.PopDown(m.geoxml.overlayman),m.geoxml.lastMarker=m),m.onMap||m.geoxml.map.panTo(m.getPosition())),m.infoWindow.getMap()||m.infoWindow.open(m.geoxml.map,this)})}if(this.extcontentmarkers){m.geoxml=this;var infoWindowOptions={content:html1+"</div>",pixelOffset:new google.maps.Size(0,2)};m.geoxml.maxiwwidth&&(infoWindowOptions.maxWidth=m.geoxml.maxiwwidth),m.infoWindow=new google.maps.InfoWindow(infoWindowOptions);var parserOptions=this.opts;m.contentUrl=contentUrl,google.maps.event.addListener(m,this.iwmethod,function(){if(m.geoxml.lastMarker=m,m.contentUrl.length>0){m.infoWindow.open(m.geoxml.map,this);for(var e=0;e<m.contentUrl.length;e++){{m.geoxml.proxy+"url="+m.contentUrl[e]}setTimeout(m.geoxml.myvar+".getextContent('"+m.contentUrl[e]+"', "+e+")",100+50*e)}}else m.infoWindow.open(m.geoxml.map,this)})}this.contentlinkmarkers&&google.maps.event.addListener(m,this.linkmethod,function(){"_blank"==m.geoxml.linktarget&&window.open(m.urlLink),"_self"==m.geoxml.linktarget&&(document.location=m.urlLink)}),""!=this.opendivmarkers&&(m.div=this.opendivmarkers,google.maps.event.addListener(m,this.iwmethod,function(){m!=m.geoxml.lastMarker&&(m.geoxml.lastMarker&&m.geoxml.lastMarker.setMap&&(m.geoxml.lastMarker.onMap||m.geoxml.lastMarker.setMap(null)),OverlayManager.PopDown(m.geoxml.overlayman),m.geoxml.lastMarker=m,m.geoxml.map.panTo(m.getPosition()));var e=document.getElementById(m.div);e&&(e.innerHTML=html1+"</div>")})),this.opts.domouseover&&(m.mess=html1+"</div>",m.geoxml=this);var nhtml="",parm;if(this.opts.sidebarid){var folderid=this.myvar+"_folder"+idx,n=this.overlayman.markers.length,blob='&nbsp;<img style="vertical-align:text-top;padding:0;margin:0;height:'+this.sidebariconheight+'px;"  border="0" src="'+href+'">&nbsp;',desc2=snip;this.sidebarsnippet?""===desc2&&(desc2=GeoXml.stripHTML(desc).substring(0,40)):desc2="",parm=this.myvar+"$$$"+name+"$$$marker$$$"+n+"$$$"+blob+"$$$"+visible+"$$$null$$$"+desc2,m.sidebarid=this.myvar+"sb"+n,m.hilite=this.hilite,m.geoxml=this,m.onOver=function(){if(this.geoxml.dohilite){var e=Lance$(this.sidebarid);e&&"undefined"!=typeof e&&(e.style.backgroundColor=this.hilite.color,e.style.color=this.hilite.textcolor)}},m.onOut=function(){if(this.geoxml.dohilite){var e=Lance$(this.sidebarid);e&&"undefined"!=typeof e&&(e.style.background="none",e.style.color="")}},google.maps.event.addListener(m,"mouseover",m.onOver),google.maps.event.addListener(m,"mouseout",m.onOut)}this.opts.addmarker?this.opts.addmarker(m,name,idx,parm,visible):this.overlayman.addMarker(m,name,idx,parm,visible)},GeoXml.prototype.getextContent=function(e,t){var s=this;s.DownloadURL(e,function(e){e&&(obj=document.getElementById("geoxmlobjcont"+t),obj&&(obj.innerHTML=e))},"geoxmlobjcont"+t+" "+e,!1)},GeoXml.getDescription=function(e){var t,s="",i=0;if("undefined"!=typeof XMLSerializer)for(var o=new XMLSerializer;i<e.childNodes.length;i++)t=o.serializeToString(e.childNodes.item(i)),s+=t;else for(;i<e.childNodes.length;i++)t=e.childNodes.item(i),s+=t.xml;var r=s.replace("<![CDATA[",""),a=r.replace("]]>","");return a=a.replace(/\&amp;/g,"&"),a=a.replace(/\&lt;/g,"<"),a=a.replace(/\&quot;/g,'"'),a=a.replace(/\&apos;/g,"'"),a=a.replace(/\&gt;/g,">")},GeoXml.prototype.processLine=function(e,t,s,i){var o=this,r=o.polylines[e],a=!0;if(e>0){var n=o.polylines[e-1];r.name==n.name&&(a=!1,o.polylines[e-1]=null,e-=1,o.polylines[e]=n)}var l,h,p=r.lines[t];if(p){{this.map,this.opts.iwoptions||{}}l={points:p,color:r.color,weight:r.width,opacity:r.opacity,type:"line",id:r.id};var m=p;1==p.length&&(m=p[0]),h=new google.maps.Polyline({map:this.map,path:m,strokeColor:r.color,strokeWeight:r.width,strokeOpacity:r.opacity}),h.bounds=r.pbounds,h.id=r.id,0==a&&this.opts.sidebarid&&(h.sidebar=this.latestsidebar);var d,g=this.overlayman.markers.length,c=this.iwwidth,u=r.description;8*u.length<c&&(c=8*u.length),c<12*r.name.length&&(c=12*r.name.length);var f="<div style='font-weight: bold; font-size: medium; margin-bottom: 0em;'>"+r.name;if(f+="</div><div style='font-family: Arial, sans-serif;font-size: small;width:"+c+"px;'>"+u+"</div>",0==t&&this.opts.sidebarid&&a){var y=r.width;2>=y&&(y=2),y>16&&(y=16);var v;if(this.rectangleLegend){var b=parseInt((16-y)/2);v='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" fill="#ffeecc" width="16px" height="16px">',("#ffffff"==r.color||"#FFFFFF"==r.color)&&(v+=' <rect stroke="none" height="16" width="16" y="0" x="0" stroke-width="null" fill="#cbcbcb"/>'),v+=' <rect stroke="none" height="16" width="'+y+'" y="0" x="'+b+'" stroke-width="null" fill="'+r.color+'"/></svg>'}else v='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" fill="#ffeecc" width="16px" height="16px">',("#ffffff"==r.color||"#FFFFFF"==r.color)&&(v+=' <rect stroke="none" height="16" width="16" y="0" x="0" stroke-width="null" fill="#cbcbcb"/>'),v+='<path stroke="'+r.color+'" d="m1.514515,10.908736c-0.457545,0.489079 0.473927,-7.091639 5.261762,-7.336174c4.787838,-0.244535 -0.457535,7.825252 4.804223,2.445392c5.261755,-5.37986 1.949991,11.609838 2.287748,3.179009"  stroke-width="2" fill="none"/></svg>';var k=snip;this.sidebarsnippet?""===k&&(k=GeoXml.stripHTML(u).substring(0,40)):k="",d=this.myvar+"$$$"+r.name+"$$$polyline$$$"+g+"$$$"+v+"$$$"+r.visibility+"$$$"+e+"$$$"+k,this.latestsidebar=this.myvar+"sb"+g}t+1<r.lines.length&&setTimeout(this.myvar+".processLine("+e+","+(t+1)+",'"+s+"',"+i+");",15),this.opts.sidebarid&&(h.sidebar=this.latestsidebar),this.opts.domouseover&&(h.mess=f),h.title=r.name,h.geoxml=this,h.strokeColor=r.color,h.strokeWeight=r.width,h.strokeOpacity=r.opacity,h.hilite=this.hilite,h.mytitle=h.title,h.map=this.map,h.idx=e;var x=h.getPosition();if(this.clickablelines){var w={content:f,pixelOffset:new google.maps.Size(0,2),position:x};this.maxiwwidth&&(w.maxWidth=this.maxiwwidth),h.infoWindow=new google.maps.InfoWindow(w)}h.onOver=function(e){var t=this.geoxml.polylines[this.idx];if(this.geoxml.dohilite){if(1!=this.hidden)for(var s=0;s<t.lineidx.length;s++){var i=this.geoxml.overlayman.markers[t.lineidx[s]];i.realColor=i.strokeColor,i.realOpacity=i.strokeOpacity,i.setOptions({strokeColor:this.geoxml.hilite.color,strokeOpacity:this.geoxml.hilite.opacity})}this.sidebar&&(Lance$(this.sidebar).style.backgroundColor=this.hilite.color,Lance$(this.sidebar).style.color=this.hilite.textcolor)}},h.onOut=function(){if(this.geoxml.dohilite){var e=this.geoxml.polylines[this.idx];if(1!=this.hidden)for(var t=0;t<e.lineidx.length;t++){var s=this.geoxml.overlayman.markers[e.lineidx[t]];s.setOptions({strokeColor:h.realColor,strokeOpacity:h.realOpacity})}this.sidebar&&(Lance$(this.sidebar).style.background="none",Lance$(this.sidebar).style.color="")}},google.maps.event.addListener(h,"mouseout",h.onOut),google.maps.event.addListener(h,"mouseover",h.onOver),google.maps.event.addListener(h,"click",function(e){if(h.geoxml.clickablelines||s){h!=h.geoxml.lastMarker&&h.geoxml.opts.singleInfoWindow&&(h.geoxml.lastMarker&&h.geoxml.lastMarker.infoWindow&&(h.geoxml.lastMarker.onMap||h.geoxml.lastMarker.setMap(h.geoxml.map),h.geoxml.lastMarker.infoWindow.close(),h.geoxml.lastMarker.onMap||h.geoxml.lastMarker.setMap(null)),h.geoxml.lastMarker=h);var t,s=!1;if(e)t=e.latLng,h.infoWindow.setPosition(t),h.infoWindow.open(h.geoxml.map);else{s=!0,t=h.infoWindow.position;var i=this.geoxml.polylines[this.idx];h.geoxml.map.fitBounds(i.bounds)}}}),l.name=r.name,l.description=escape(r.description),this.hideall&&(r.visibility=!1),l.visibility=r.visibility,this.kml[s].marks.push(l);var M=h.getBounds().getNorthEast(),_=h.getBounds().getSouthWest();this.bounds.extend(M),this.bounds.extend(_),this.overlayman.folderBounds[s].extend(_),this.overlayman.folderBounds[s].extend(M),this.polylines[e].bounds.extend(M),this.polylines[e].bounds.extend(_),g=this.overlayman.markers.length,this.polylines[e].lineidx.push(g),this.overlayman.addMarker(h,r.name,s,d,r.visibility,!0)}},GeoXml.prototype.createPolyline=function(e,t,s,i,o,r,a,n,l,h){var p=this,m={};t?m.color=t:m.color=p.randomColor(),i?m.opacity=i:m.opacity=.45,s?m.width=s:m.width=4,m.idx=n,m.visibility=l,p.hideall&&(m.visibility=!1),m.name=r,m.bounds=new google.maps.LatLngBounds,m.description=a,m.lines=[],m.lines.push(e),m.lineidx=[],m.id=h,p.polylines.push(m),setTimeout(p.myvar+".processLine("+(p.polylines.length-1)+",0,'"+n+"',true);",15)},GeoXml.prototype.processPLine=function(e,t,s){var i=this.polyset[e],o=i.lines[t];o&&o.length&&i.obj.polylines.push(o),t==i.lines.length-1?this.finishPolygon(i.obj,s):setTimeout(this.myvar+".processPLine("+e+","+(t+1)+",'"+s+"');",5)},GeoXml.prototype.finishPolygon=function(e,t){e.type="polygon",this.finishPolygonJSON(e,t,!1)},GeoXml.prototype.getBounds=function(e){for(var t,s=new google.maps.LatLngBounds,i=e.getPaths(),o=0;o<i.getLength();o++){t=i.getAt(o);for(var r=0;r<t.getLength();r++)s.extend(t.getAt(r))}return s},GeoXml.prototype.finishPolygonJSON=function(e,t,s,i){{var o=this;o.opts.iwoptions||{}}"undefined"==typeof e.visibility&&(e.visibility=!0),o.hideall&&(e.visibility=!1);var r=unescape(e.description),a=e.snip;e.opacity=e.fillOpacity;var n={};n.paths=e.polylines;var l="<p style='font-family: Arial, sans-serif; font-weight: bold; font-size: medium; margin-bottom: 0em; margin-top:0em'>"+e.name+"</p>";r!=e.name&&(l+="<div style='font-family: Arial, sans-serif;font-size: small;width:"+this.iwwidth+"px;'>"+r+"</div>");var h=i!="p_"+e.name;h&&this.opts.sidebarid?this.latestsidebar=o.myvar+"sb"+this.overlayman.markers.length:this.latestsidebar="",o.opts.domouseover&&(n.mess=l),e.strokeColor?n.strokeColor=e.strokeColor:n.strokeColor=e.color,e.outline?(e.strokeWeight?n.strokeWeight=e.strokeWeight:n.strokeWeight=e.width,n.strokeOpacity=e.strokeOpacity):(n.strokeWeight=0,n.strokeOpacity=0),n.hilite=o.hilite,e.fill?n.fillOpacity=e.opacity:n.fillOpacity=0,n.fillColor=e.color.toString();var p=new google.maps.Polygon(n);o.domouseover&&(p.mess=l),p.geoxml=o,p.title=e.name,p.id=e.id;var m=this.overlayman.markers.length;h&&(o.multibounds.push(new google.maps.LatLngBounds),o.polygons.push([]));var d=o.multibounds.length-1;o.multibounds[d].extend(p.getBounds().getSouthWest()),o.multibounds[d].extend(p.getBounds().getNorthEast()),o.polygons[o.polygons.length-1].push(m),p.polyindex=o.polygons.length-1,p.geomindex=d,p.sidebarid=this.latestsidebar;var g={content:l,pixelOffset:new google.maps.Size(0,2),position:p.getCenter()};this.maxiwwidth&&(g.maxWidth=this.maxiwwidth),p.infoWindow=new google.maps.InfoWindow(g),p.onOver=function(e){if(this.geoxml.dohilite){if(this.sidebarid){var t=Lance$(this.sidebarid);

t&&(t.style.backgroundColor=this.hilite.color,t.style.color=this.hilite.textcolor)}if(this.geoxml.clickablepolys){var s=this.geoxml.polygons[this.polyindex];if(s&&1!=this.hidden)for(var i=0;i<s.length;i++){var o=this.geoxml.overlayman.markers[s[i]];o.realColor=n.fillColor,o.realOpacity=n.fillOpacity,o.setOptions({fillColor:this.hilite.color,fillOpacity:this.hilite.opacity})}}}},p.onOut=function(){if(this.geoxml.dohilite){if(this.sidebarid){var e=Lance$(this.sidebarid);e&&(e.style.background="none",e.style.color="")}var t;if(this.geoxml.clickablepolys&&(t=this.geoxml.polygons[this.polyindex]),t&&1!=this.hidden)for(var s=0;s<t.length;s++){var i=this.geoxml.overlayman.markers[t[s]],o=i.realColor.toString(),r=i.realOpacity.toString();i.setOptions({fillColor:o,fillOpacity:r})}}},p.onClick=function(e){!e&&this.geoxml.alwayspop&&(c=this.geoxml.multibounds[this.geomindex],this.geoxml.map.fitBounds(c),e={},e.latLng=c.getCenter()),e?e=e.latLng:(c=this.geoxml.multibounds[this.geomindex],this.geoxml.map.fitBounds(c),e=c.getCenter()),this.geoxml.clickablepolys&&(this.geoxml.opts.singleInfoWindow&&(this.geoxml.lastMarker&&this.geoxml.lastMarker.infoWindow&&this.geoxml.lastMarker.infoWindow.close(),this.geoxml.lastMarker=this),this.infoWindow.setPosition(e),this.infoWindow.open(this.geoxml.map))},google.maps.event.addListener(p,"click",p.onClick),google.maps.event.addListener(p,"mouseout",p.onOut),google.maps.event.addListener(p,"mouseover",p.onOver),e.description=escape(r),this.kml[t].marks.push(e),p.setMap(this.map);var c;if(this.opts.polylabelclass&&h){var u=this.getBounds(p).getCenter(),f=this.opts.polylabeloffset;f||(f=new google.maps.Size(0,0)),f.x=-(6*e.name.length);var y=new ELabel(u," "+e.name+" ",this.opts.polylabelclass,f,this.polylabelopacity,!0);p.label=y,y.setMap(this.map)}var v;if(this.basesidebar&&h){{var b;this.myvar+"_folder"+t}this.rectangleLegend?(b='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" width="16px" height="16px">',b+=' <rect stroke="none" height="16" width="16" y="0" x="0" stroke-width="null" fill="'+e.color+'"/></svg>'):(b='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" width="16px" height="16px">',b+='<path stroke="'+e.strokeColor+'" transform="rotate(139.901 9.70429 10.2675)" fill="'+e.color+'" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" d="m2.72366,9.83336c3.74686,-4.221 6.00924,-2.11097 7.43079,1.52863c1.42154,3.63961 3.85727,-1.60143 6.07385,1.67422c2.21659,3.27565 -4.2,6.26012 -7.17232,7.93434" id="svg_2"/></svg>');var k=a;this.sidebarsnippet?""===k&&(k=GeoXml.stripHTML(r).substring(0,40)):k="",v=this.myvar+"$$$"+e.name+"$$$polygon$$$"+m+"$$$"+b+"$$$"+e.visibility+"$$$null$$$"+k}if(s){var x=p.getBounds().getNorthEast(),w=p.getBounds().getSouthWest();this.bounds.extend(x),this.bounds.extend(w),this.overlayman.folderBounds[t].extend(w),this.overlayman.folderBounds[t].extend(x)}return this.overlayman.addMarker(p,e.name,t,v,e.visibility),e.name},GeoXml.prototype.finishLineJSON=function(e,t,s){{var i,o=this;this.map}i=new google.maps.Polyline({path:e.points,strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity,clickable:this.clickablelines}),i.mytitle=e.name,i.title=e.name,i.strokeColor=e.color,i.strokeOpacity=e.opacity,i.geoxml=this,i.hilite=this.hilite;var r,a=o.overlayman.markers.length,n=!1;"l_"+e.name!=s?(n=!0,o.polylines.push(e),r=o.polylines.length-1,o.polylines[r].lineidx=[],o.polylines[r].lineidx.push(a),o.latestsidebar=o.myvar+"sb"+a):(r=o.polylines.length-1,o.polylines[r].lineidx.push(a)),this.opts.basesidebar&&(i.sidebarid=o.latestsidebar),i.onOver=function(){if(this.geoxml.dohilite){if(this.sidebarid){var e=Lance$(this.sidebarid);e&&"undefined"!=typeof e&&(e.style.backgroundColor=this.hilite.color)}this.realColor=this.strokeColor,1!=i.hidden&&i&&"undefined"!=typeof i&&i.setOptions({strokeColor:this.hilite.color})}},i.onOut=function(){if(this.geoxml.dohilite){if(this.sidebarid){var e=Lance$(this.sidebarid);e&&"undefined"!=typeof e&&(e.style.background="none")}1!=i.hidden&&i&&"undefined"!=typeof i&&i.setOptions({strokeColor:this.realColor})}},google.maps.event.addListener(i,"mouseover",i.onOver),google.maps.event.addListener(i,"mouseover",i.onOut);var l="";o.kml[t].marks.push(e);var h=unescape(e.description),p=this.iwwidth;8*h.length<p&&(p=8*h.length),p<12*e.name.length&&(p=12*e.name.length);var m="<div style='font-family: Arial, sans-serif; font-weight: bold; font-size: medium; margin-bottom: 0em;'>"+e.name+"</div>";e.name!=h&&(m+="<div style='font-family: Arial, sans-serif;font-size: small;width:"+p+"px'>"+h+"</div>"),i.map=this.map;var d={content:m,pixelOffset:new google.maps.Size(0,2),position:point};if(this.maxiwwidth&&(d.maxWidth=this.maxiwwidth),i.infoWindow=new google.maps.InfoWindow(d),this.clickablelines&&google.maps.event.addListener(i,"click",function(e){e||(e=i.getPosition()),i.infoWindow.open()}),o.basesidebar&&n){var g;if(this.rectangleLegend){var c=e.weight;1>c&&(c=1);var u=parseInt((16-c)/2);g='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" width="16px" height="16px">',g+=' <rect stroke="none" height="16" width="'+c+'" y="0" x="'+u+'" stroke-width="null" fill="'+e.color+'"/></svg>'}else g='<svg xmlns="http://www.w3.org/2000/svg" style="margin-left:0px;margin-top:0px" version="1.2" width="16px" height="16px">',("#ffffff"==op.color||"#FFFFFF"==op.color)&&(g+=' <rect stroke="none" height="16" width="16" y="0" x="0" stroke-width="null" fill="#cbcbcb"/>'),g+='<path stroke="'+op.color+'" d="m1.514515,10.908736c-0.457545,0.489079 0.473927,-7.091639 5.261762,-7.336174c4.787838,-0.244535 -0.457535,7.825252 4.804223,2.445392c5.261755,-5.37986 1.949991,11.609838 2.287748,3.179009"  stroke-width="'+e.weight+'" fill="none"/></svg>';"undefined"==typeof e.visibility&&(e.visibility=!0);var f=snip;this.sidebarsnippet?""===f&&(f=GeoXml.stripHTML(h).substring(0,40)):f="",l=o.myvar+"$$$"+e.name+"$$$polyline$$$"+a+"$$$"+g+"$$$"+e.visibility+"$$$"+(o.polylines.length-1)+"$$$"+f}var y=i.getBounds().getNorthEast(),v=i.getBounds().getSouthWest();return o.bounds.extend(y),o.bounds.extend(v),o.overlayman.folderBounds[t].extend(v),o.overlayman.folderBounds[t].extend(y),o.overlayman.addMarker(i,e.name,t,l,e.visibility),e.name},GeoXml.prototype.handlePlaceObj=function(e,t,s,i,o){var r=this,a=r.jsonmarks[e],n=a.name;switch(a.title&&(n=a.title),n.length+o>r.maxtitlewidth&&(r.maxtitlewidth=n.length+o),a.type){case"polygon":i="p_"+r.finishPolygonJSON(a,s,!0,i);break;case"line":case"polyline":i="l_"+r.finishLineJSON(a,s,i);break;case"point":r.createMarkerJSON(a,s),i=""}if(t-1>e){var l=r.myvar+".handlePlaceObj("+(e+1)+","+t+","+s+',"'+i+'",'+o+");";document.status="processing "+n,setTimeout(l,1)}else i="",e==r.jsonmarks.length-1&&(r.progress--,r.progress<=0&&(r.opts.nozoom||r.map.fitBounds(r.bounds),google.maps.event.trigger(r,"parsed"),r.setFolders(),r.ParseURL()))},GeoXml.prototype.parseJSON=function(doc,title,latlon,desc,sbid){var that=this;that.overlayman.miStart=new Date,that.jsdocs=eval("("+doc+")");var bar=Lance$(that.basesidebar);bar&&(bar.style.display=""),that.recurseJSON(that.jsdocs[0],title,desc,that.basesidebar,0)},GeoXml.prototype.setFolders=function(){for(var e=this,t=e.kml.length,s=0;t>s;s++){var i=e.kml[s].folderid,o=new String(i),r=o.replace("_folder","FB"),a=Lance$(r),n=Lance$(i);null!==n&&i!=e.opts.sidebarid&&(e.kml[s].open?n.style.display="block":(n.style.display="none",a.src==e.foldericon&&(a.src=e.folderclosedicon),a.src==e.docicon&&(a.src=e.docclosedicon)))}},GeoXml.prototype.recurseJSON=function(e,t,s,i,o){var r=this,a=e.marks,n=e.title;i||(i=0);var l=unescape(e.description);!l&&s&&(l=s);var h=r.forcefoldersopen;e.open&&(h=!0);var p=!0;"undefined"!=typeof e.visibility&&e.visibility&&(p=!0),r.hideall&&(p=!1);var m=e.snippet,d=r.overlayman.folders.length;l||(l=n);var g,c;r.overlayman.folders.push([]),r.overlayman.subfolders.push([]),r.overlayman.folderhtml.push([]),r.overlayman.folderhtmlast.push(0),r.overlayman.folderBounds.push(new google.maps.LatLngBounds),r.kml.push(new KMLObj(t,l,h)),!o&&e.folders&&e.folders.length>1||e.marks.length?(c=2>o||e.marks.length<1?r.globalicon:r.foldericon,g=r.createFolder(d,n,i,c,l,m,h,p)):g=i;for(var u,f=r.jsonmarks.length,y=f+a.length,v=0;v<a.length;v++){var b=a[v];if(r.jsonmarks.push(b),s=unescape(b.description),u=null,r.opts.preloadHTML&&s&&s.match(/<(\s)*img/i)){var k=document.createElement("span");k.style.visibility="visible",k.style.position="absolute",k.style.left="-1200px",k.style.top="-1200px",k.style.zIndex=this.overlayman.markers.length,document.body.appendChild(k),k.innerHTML=s}}r.groundOverlays,a.length&&r.handlePlaceObj(f,y,d,null,o);var x=0,w=0;if("undefined"!=typeof e.folders){x=e.folders.lenth;for(var M=0;M<e.folders.length;++M){var _=r.jsdocs[e.folders[M]];w=r.recurseJSON(_,_.title,_.description,g,o+1),r.overlayman.subfolders[d].push(w),r.overlayman.folderBounds[d].extend(r.overlayman.folderBounds[w].getSouthWest()),r.overlayman.folderBounds[d].extend(r.overlayman.folderBounds[w].getNorthEast()),w!=d&&r.kml[d].folders.push(w)}}return(x||a.length)&&(r.bounds.extend(r.overlayman.folderBounds[d].getSouthWest()),r.bounds.extend(r.overlayman.folderBounds[d].getNorthEast())),d},GeoXml.prototype.createPolygon=function(e,t,s,i,o,r,a,n,l,h,p,m,d,g,c){var u=(this.map,{});u.obj={description:l,name:n,snip:h},u.obj.polylines=[],u.obj.id=c,u.obj.visibility=m,u.obj.fill=d,u.obj.outline=g,u.obj.fillcolor=o,u.obj.strokeColor=t,u.obj.strokeOpacity=i,t?u.obj.strokeColor=t:u.obj.strokeColor=this.style.color,o?u.obj.color=o:u.obj.color=this.randomColor(),i?u.obj.opacity=i:(u.obj.opacity=this.style.opacity,u.obj.strokeOpacity=this.style.opacity),r?u.obj.fillOpacity=r:u.obj.fillOpacity=this.style.fillopacity,s?u.obj.strokeWeight=s:u.obj.strokeWeight=this.style.width,u.bounds=a,u.lines=e,u.sidebarid=this.opts.sidebarid,this.polyset.push(u),setTimeout(this.myvar+".processPLine("+(this.polyset.length-1)+",0,'"+p+"')",1)},GeoXml.prototype.toggleFolder=function(e){var t=Lance$(this.myvar+"_folder"+e),s=Lance$(this.myvar+"TB"+e),i=Lance$(this.myvar+"FB"+e);"none"==t.style.display?(t.style.display="",s&&(s.style.fontWeight="normal"),i.src==this.folderclosedicon&&(i.src=this.foldericon),i.src==this.docclosedicon&&(i.src=this.docicon)):(t.style.display="none",s&&(s.style.fontWeight="bold"),i.src==this.foldericon&&(i.src=this.folderclosedicon),i.src==this.docicon&&(i.src=this.docclosedicon))},GeoXml.prototype.saveJSON=function(){if(topwin.standalone){var e=browseForSave("Select a directory to place your json file","JSON Data Files (*.js)|*.js|All Files (*.*)|*.*","JSON-DATA");if("undefined"!=typeof e){var t=JSON.stringify(this.kml);saveLocalFile(e+".js",t)}}else if("undefined"!=typeof JSON){var t=JSON.stringify(this.kml);"undefined"!=typeof serverBlessJSON?serverBlessJSON(escape(t),"MyKJSON"):this.showIt(t)}else{var s="No JSON methods currently available";console?console.error(s):alert(s)}},GeoXml.prototype.hide=function(){this.contentToggle(1,!1),this.overlayman.currentZoomLevel=-1,OverlayManager.Display(this.overlayman),google.events.trigger(this,"changed")},GeoXml.prototype.setMap=function(e){e?this.show():this.hide()},GeoXml.prototype.show=function(){this.contentToggle(1,!0),this.overlayman.currentZoomLevel=-1,OverlayManager.Display(this.overlayman)},GeoXml.prototype.toggleContents=function(e,t){this.contentToggle(e,t),this.overlayman.currentZoomLevel=-1,OverlayManager.Display(this.overlayman)},GeoXml.prototype.contentToggle=function(e,t){var s,i,o=this.overlayman.folders[e];if("undefined"!=typeof o){if(t)for(i=0;i<o.length;i++)this.overlayman.markers[o[i]].setMap(this.map),this.overlayman.markers[o[i]].onMap=!0,this.overlayman.markers[o[i]].label&&this.overlayman.markers[o[i]].label.setMap(this.map),this.basesidebar&&(s=Lance$(this.myvar+""+o[i]+"CB"),s&&"undefined"!=typeof s&&(s.checked=!0)),this.overlayman.markers[o[i]].hidden=!1;else for(i=0;i<o.length;i++)this.overlayman.markers[o[i]].hidden=!0,this.overlayman.markers[o[i]].onMap=!1,this.overlayman.markers[o[i]].setMap(null),this.overlayman.markers[o[i]].label&&this.overlayman.markers[o[i]].label.setMap(null),this.basesidebar&&(s=Lance$(this.myvar+""+o[i]+"CB"),s&&"undefined"!=typeof s&&(s.checked=!1));var r=this.overlayman.subfolders[e];if("undefined"!=typeof r)for(i=0;i<r.length;i++)r[i]!=e&&(this.basesidebar&&(s=Lance$(this.myvar+""+r[i]+"FCB"),s&&"undefined"!=typeof s&&(s.checked=!!t)),this.contentToggle(r[i],t))}},GeoXml.prototype.showHide=function(e,t,s){var i;if(null!==e)t?(this.overlayman.markers[e].setMap(this.map),this.overlayman.markers[e].onMap=!0,this.overlayman.markers[e].hidden=!1,this.overlayman.markers[e].label&&this.overlayman.markers[e].label.setMap(this.map)):(this.overlayman.markers[e].setMap(null),this.overlayman.markers[e].onMap=!1,this.overlayman.markers[e].hidden=!0,this.overlayman.markers[e].label&&this.overlayman.markers[e].label.setMap(null));else{var o=this.polylines[s];if(t)for(i=0;i<o.lineidx.length;i++){var r=o.lineidx[i];this.overlayman.markers[r].setMap(this.map),this.overlayman.markers[r].onMap=!0,this.overlayman.markers[r].hidden=!1,o.label&&o.label.setMap(this.map)}else for(i=0;i<o.lineidx.length;i++)this.overlayman.markers[o.lineidx[i]].setMap(null),this.overlayman.markers[o.lineidx[i]].onMap=!1,this.overlayman.markers[o.lineidx[i]].hidden=!0,o.label&&o.label.setMap(null)}this.overlayman.currentZoomLevel=-1,OverlayManager.Display(this.overlayman,!0)},GeoXml.prototype.toggleOff=function(e,t){t?(this.overlayman.markers[e].setMap(this.map),this.overlayman.markers[e].hidden=!1):(this.overlayman.markers[e].setMap(null),this.overlayman.markers[e].hidden=!0),this.labels&&this.labels.onMap&&(this.labels.setMap(null),this.labels.setMap(this.map))},GeoXml.addSidebar=function(e,t,s,i,o,r,a,n){var l="checked";"false"==r&&(l="");var h="",p=e+"sb"+i;switch(n=n&&"undefined"!=n?"<br /><span class='"+e+"snip'>&nbsp;"+n+"</span>":"",s){case"marker":h='<li id="'+p+'" onmouseout="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'mouseout');\" onmouseover=\"google.maps.event.trigger("+e+".overlayman.markers["+i+"],'mouseover');\" ><input id=\""+e+i+'CB" type="checkbox" style="vertical-align:middle" '+l+' onclick="'+e+".showHide("+i+',this.checked)"><a href="#" onclick="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'click');return false;\">"+o+"&nbsp;"+t+n+"</a></li>";break;case"polyline":h='<li id="'+p+'"  onmouseout="'+e+".overlayman.markers["+i+'].onOut();" onmouseover="'+e+".overlayman.markers["+i+'].onOver();" ><input id="'+e+i+'CB" type="checkbox" '+l+' onclick="'+e+".showHide(null,this.checked,"+a+')"><span style="margin-top:6px;"><a href="#" onclick="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'click');return false;\">&nbsp;"+o+"&nbsp;"+t+n+"</a></span></li>";break;case"polygon":h='<li id="'+p+'"  onmouseout="'+e+".overlayman.markers["+i+'].onOut();" onmouseover="'+e+".overlayman.markers["+i+'].onOver();" ><input id="'+e+i+'CB" type="checkbox" '+l+' onclick="'+e+".showHide("+i+',this.checked)"><span style="margin-top:6px;"><a href="#" onclick="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'click');return false;\">&nbsp;"+o+"&nbsp;"+t+n+"</a></span></nobr></li>";break;case"groundoverlay":h='<li id="'+p+'"><input id="'+e+i+'CB" type="checkbox" '+l+' onclick="'+e+".showHide("+i+',this.checked)"><span style="margin-top:6px;"><a href="#" onclick="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'zoomto');return false;\">&nbsp;"+o+"&nbsp;"+t+n+"</a></span></li>";break;case"tiledoverlay":h='<li id="'+p+'"><nobr><input id="'+e+i+'CB" type="checkbox" '+l+' onclick="'+e+".toggleOff("+i+',this.checked)"><span style="margin-top:6px;"><a href="#" oncontextMenu="'+e+".upgradeLayer("+a+');return false;" onclick="google.maps.event.trigger('+e+".overlayman.markers["+i+"],'zoomto');return false;\">"+GeoXml.WMSICON+"&nbsp;"+t+"</a><br />"+o+"&nbsp;</span>"+n+"</li>"}return h},GeoXml.addDropdown=function(e,t,s,i,o){return'<option value="'+i+'">'+t+"</option>"},GeoXml.prototype.parse=function(e){var t=this,s=[];"undefined"!=typeof e&&(s="string"!=typeof e?e:e.split(",")),t.progress+=t.urls.length;for(var i=0;i<t.urls.length;i++){var o=s[i];if("undefined"==typeof o||!o||"null"==o){var r=t.urls[i].split("/");o=r[r.length-1]}var a=/\.js$/i;-1!=t.urls[i].search(a)?t.loadJSONUrl(this.urls[i],o):t.loadXMLUrl(this.urls[i],o)}},GeoXml.prototype.removeAll=function(){this.allRemoved=!0;for(var e=0;e<this.overlayman.markers.length;e++)this.toggleOff(e,!1)},GeoXml.prototype.addAll=function(){this.allRemoved=!1;for(var e=0;e<this.overlayman.markers.length;e++)this.toggleOff(e,!0)},GeoXml.prototype.processString=function(e,t,s){var i=[];t&&(i=t.split(",")),"string"==typeof e?this.docs=[e]:this.docs=e,this.progress+=this.docs.length;for(var o=0;o<this.docs.length;o++)this.processing(this.parseXML(this.docs[o]),i[o],s)},GeoXml.prototype.parseXML=function(e){var t,s;try{window.DOMParser?(s=new DOMParser,t=s.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(i){t=void 0}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){var o="Invalid XML: "+e;console?console.error(o):alert(o)}return t},GeoXml.prototype.getText=function(e){var t,s="";if(!e||!e.childNodes)return s;e=e.childNodes;for(var i=0;e[i];i++)t=e[i],3===t.nodeType||4===t.nodeType?s+=t.nodeValue:8!==t.nodeType&&(s+=this.getText(t.childNodes));return s},GeoXml.prototype.processXML=function(e,t,s){var i=[];"undefined"!=typeof t&&(i="string"==typeof t?t.split(","):t),"array"==typeof e?this.docs=e:this.docs=[e],this.progress+=this.docs.length;for(var o=0;o<this.docs.length;o++){{"Processing "+i[o]}this.processing(this.docs[o],i[o],s)}},GeoXml.prototype.makeDescription=function(e,t,s){for(var i,o="",r=e.childNodes.length,a=0;r--;){var n=e.childNodes.item(a),l=n.nodeName,h=l.split(":"),p="";if(p=h.length>1?h[1]:l,p.match(/^(lat|long|visible|visibility|boundedBy|StyleMap|drawOrder|styleUrl|posList|coordinates|Style|Polygon|LineString|Point|LookAt|drawOrder|Envelope|Box|MultiPolygon|where|guid)/))this.currdeschead="";else{if(p.match(/#text|the_geom|SchemaData|ExtendedData|#cdata-section/)||p.match(/Snippet/i)||(p.match(/SimpleData/)&&(p=n.getAttribute("name")),this.currdeschead="<b>&nbsp;"+p+"&nbsp;</b> :"),i=n.nodeValue,"link"==l){var m=n.getAttribute("href");m&&"null"!=m?i='<a target="_blank" title="'+m+'" href="'+m+'">Link</a>':i&&"null"!=i&&(i='<a target="_blank" title="'+i+'" href="'+i+'">Link</a>'),this.currdeschead="Link to Article"}if(p.match(/(\S)*(name|title)(\S)*/i))i||(i=this.getText(n)),t=i,i&&"undefined"!=typeof t&&t.length>this.maxtitlewidth&&(this.maxtitlewidth=t.length),this.currdeschead="";else if(i&&i.match(/(\S)+/)&&(i.match(/^http:\/\/|^https:\/\//i)?i='<a target="_blank" " href="'+i+'">[go]</a>':t&&""!=t||(t=i,i&&"undefined"!=typeof t&&t.length>this.maxtitlewidth&&(this.maxtitlewidth=t.length))),i&&"null"!=i&&"  "!=i&&" "!=i&&1!=i.match(/(\s|\t|\n)*/)&&(""!=this.currdeschead&&(o+="<br />"),o+=this.currdeschead+""+i,this.currdeschead=""),n.childNodes.length){var d=this.makeDescription(n,t,s+1);d&&(o+=d.desc,"undefined"!=typeof d.title&&d.title&&(t=d.title,t.length>this.maxtitlewidth&&(this.maxtitlewidth=t.length+s)))}}a++}var g={};return g.desc=o,g.title=t,g},GeoXml.prototype.randomColor=function(){for(var e="#",t=0;6>t;t++){var s=parseInt(16*Math.random(),10)+1;e+=s.toString(16)}return e.substring(0,7)},GeoXml.prototype.handleGeomark=function(e,t,s){var i,o,r,a,n=this;o="",i="";var l,h,p=0,m=!0;this.hideall&&(m=!1);var d,g,c,u,f,y,v,b,k,x,w,M=!0,_=!0,L=[],C="",S=[],O=0,B=0,T=0,N=0,$=[],I=new google.maps.LatLngBounds,P=e.getElementsByTagName("coordinates");if(P.length<1&&(P=e.getElementsByTagName("gml:coordinates")),P.length<1){for(P=[],S=e.getElementsByTagName("gml:posList"),S.length<1&&(S=e.getElementsByTagName("posList")),w=0;w<S.length;w++){if(C=" ",L=this.getText(S.item(w)).split(" "),n.isWFS)for(x=0;x<L.length-1;x++)L[x]&&" "!=L[x]&&!isNaN(parseFloat(L[x]))&&(C+=""+parseFloat(L[x])+","+parseFloat(L[x+1]),C+=" ",x++);else for(x=0;x<L.length-1;x++)L[x]&&" "!=L[x]&&!isNaN(parseFloat(L[x]))&&(C+=""+parseFloat(L[x+1])+","+parseFloat(L[x]),C+=" ",x++);C&&(S.item(w).parentNode&&"gml:LineString"==S.item(w).parentNode.nodeName?T++:N++,b="<coordinates>"+C+"</coordinates>",y=this.parseXML(b),P.push&&P.push(y))}var z=e.getElementsByTagName("gml:pos");if(z.length<1&&(z=e.getElementsByTagName("gml:pos")),z.length)for(k=0;k<z.length;k++)v=this.getText(z.item(k)),L=v.split(" "),y=this.parseXML(n.isWFS?"<coordinates>"+L[0]+","+L[1]+"</coordinates>":"<coordinates>"+L[1]+","+L[0]+"</coordinates>"),P.push&&P.push(y)}var E=!1;O=0,B=0,T=0,N=0;var G=n.makeDescription(e,"");i="<div id='currentwindow' style='overflow:auto;height:"+this.iwheight+"px' >"+G.desc+"</div> ",!r&&G.title&&(r=G.title,r.length>this.maxtitlewidth&&(this.maxtitlewidth=r.length)),E&&"undefined"!=typeof l&&P.push(""+h+","+l);for(var X,W,F,A=[],D=0;D<P.length;D++){W=!1,!P[D].parentNode||"gml:Box"!=P[D].parentNode.nodeName&&"gml:Envelope"!=P[D].parentNode.nodeName||(W=!0),C=this.getText(P[D]),C+=" ",C=C.replace(/\s+/g," "),C=C.replace(/^ /,""),C=C.replace(/, /,",");var j=C.split(" ");if(1==j.length||""==j[1])F=j[0].split(","),X=new google.maps.LatLng(parseFloat(F[1])/s.ys-s.y,parseFloat(F[0])/s.xs-s.x),n.bounds.extend(X),W||("undefined"==typeof r&&(r=GeoXml.stripHTML(G.desc),i=""),r==i&&(i=""),n.opts.createmarker?n.opts.createmarker(X,r,i,p,t,null,m):n.createMarker(X,r,i,p,t,null,m));else{for(k=0;k<j.length-1;k++)F=j[k].split(","),X=new google.maps.LatLng(parseFloat(F[1])/s.ys-s.y,parseFloat(F[0])/s.xs-s.x),$.push(X),I.extend(X);n.bounds.extend(I.getNorthEast()),n.bounds.extend(I.getSouthWest()),W||A.push($)}}if(A&&!(A.length<1)){var H=e.getElementsByTagName("LineString");H.length<1&&(H=e.getElementsByTagName("gml:LineString")),(H.length||T>0)&&(a?(d=a.strokeWeight,g=a.strokeColor,c=a.strokeOpacity):(d=this.style.width,g=this.style.color,c=this.style.opacity),"undefined"==typeof r&&(r=GeoXml.stripHTML(G.desc)),r==i&&(i=""),n.opts.createpolyline?n.opts.createpolyline(A,g,d,c,I,r,i,t,m):n.createPolyline(A,g,d,c,I,r,i,t,m));var Z=e.getElementsByTagName("Polygon");Z.length<1&&(Z=e.getElementsByTagName("gml:Polygon")),(Z.length||N>0)&&(a&&(d=a.strokeWeight,g=a.strokeColor,c=a.strokeOpacity,u=a.fillOpacity,f=a.fillColor,M=a.fill,_=a.outline),f=this.randomColor(),g=this.randomColor(),M=1,_=1,"undefined"==typeof r&&(r=GeoXml.stripHTML(i),i=""),r==i&&(i=""),n.opts.createpolygon?n.opts.createpolygon(A,g,d,c,f,u,I,r,i,t,m,M,_):n.createPolygon(A,g,d,c,f,u,I,r,i,t,m,M,_))}},GeoXml.prototype.handlePlacemark=function(e,t,s,i){var o=e.getElementsByTagName("MultiGeometry");if(o.length<1)this.handlePlacemarkGeometry(e,e,t,s,i);else{var r,a=o[0].getElementsByTagName("Point");for(r=0;r<a.length;r++)this.handlePlacemarkGeometry(e,a[r],t,s,i);var n=o[0].getElementsByTagName("LineString");for(r=0;r<n.length;r++)this.handlePlacemarkGeometry(e,n[r],t,s,i);var l=o[0].getElementsByTagName("Polygon");for(r=0;r<l.length;r++)this.handlePlacemarkGeometry(e,l[r],t,s,i)}},GeoXml.prototype.handlePlacemarkGeometry=function(e,t,s,i,o){var r,a,n,l,h=this;a="",r="";var p,m,d=0,g=!0;this.hideall&&(g=!1);var c,u,f,y,v,b,k,x,w,M,_,L,C,S,O,B,T,N,$,I=!1,P=[],z=[],E=[],G=e.getAttribute("id"),X=0,W=0,F=0,A="",D="",j="";S=e.getAttribute("lat"),"undefined"!=typeof S&&(p=S),S=e.getAttribute("lon"),"undefined"!=typeof S&&(I=!0,m=S),S=0;var H=t.getElementsByTagName("coordinates");if(H.length<1&&(H=t.getElementsByTagName("gml:coordinates")),H.length<1){H=[];var Z=t.getElementsByTagName("gml:posList");for(Z.length||(Z=t.getElementsByTagName("posList")),S=0;S<Z.length;S++){A=" ";var U=this.getText(Z.item(S))+" ";if(U=U.replace(/(\s)+/g," "),M=U.split(" "),h.isWFS)for($=0;$<M.length-1;$++)isNaN(parseFloat(M[$]))||isNaN(parseFloat(M[$+1]))||(A+=""+parseFloat(M[$])+","+parseFloat(M[$+1]),A+=" ",$++);else for($=0;$<M.length-1;$++)isNaN(parseFloat(M[$]))||isNaN(parseFloat(M[$+1]))||(A+=""+parseFloat(M[$+1])+","+parseFloat(M[$]),A+=" ",$++);A&&(Z.item(S).parentNode&&"gml:LineString"==Z.item(S).parentNode.nodeName?W++:F++,L="<coordinates>"+A+"</coordinates>",_=this.parseXML(L),H.push&&H.push(_))}if(O=t.getElementsByTagName("gml:pos"),O.length<1&&(O=t.getElementsByTagName("gml:pos")),O.length)for(B=0;B<O.length;B++)C=this.getText(O.item(B))+" ",M=C.split(" "),_=this.parseXML(h.isWFS?"<coordinates>"+M[0]+","+M[1]+"</coordinates>":"<coordinates>"+M[1]+","+M[0]+"</coordinates>"),H.push&&H.push(_)}for(var R=0;R<e.childNodes.length;R++){var V=e.childNodes.item(R).nodeName;C=this.getText(e.childNodes.item(R));var J,q=V.split(":");J=q.length>1?q[1].toLowerCase():q[0].toLowerCase();var K=!1;switch(J){case"name":n=C,n.length+i>this.maxtitlewidth&&(this.maxtitlewidth=n.length+i);break;case"title":a=C,a.length+i>this.maxtitlewidth&&(this.maxtitlewidth=a.length+i);break;case"desc":case"description":r=GeoXml.getDescription(e.childNodes.item(R)),r||(r=C);var Y=r.match(/src=\"(.*)\"/i);if(Y)for(var Q=1;Q<Y.length;Q++)if(Y[Q].match(/^http/));else if(this.url.match(/^http/)){var ee=this.url.lastIndexOf("/");-1!=ee&&(newsrc=this.url.substring(0,ee)+"/"+Y[Q],r=r.replace(Y[Q],newsrc))}else{var ee=this.url.lastIndexOf("/");-1!=ee&&(newsrc=this.url.substring(0,ee)+"/"+Y[Q],r=r.replace(Y[Q],newsrc))}if(h.opts.preloadHTML&&r&&r.match(/<(\s)*img/i)){var te=document.createElement("span");te.style.visibility="visible",te.style.position="absolute",te.style.left="-12000px",te.style.top="-12000px",te.style.zIndex=this.overlayman.markers.length,te.onload=function(){te.style.visibility="hidden"},document.body.appendChild(te),te.innerHTML=r}if(r.match(/^http:\/\//i)){var se=r.split(/(\s)+/);if(se.length>1){r='<a href="'+se[0]+'">'+se[0]+"</a>";for(var ie=1;ie<se.length;ie++)r+=se[ie]}else r='<a href="'+r+'">'+r+"</a>"}break;case"visibility":"0"==C&&(g=!1);break;case"Snippet":case"snippet":j=C;break;case"href":case"link":if(C)r+="<p><a target='_blank' href='"+C+"'>link</a></p>",D=C;else{var oe=e.childNodes.item(R).getAttribute("href");if(oe){var re=e.childNodes.item(R).getAttribute("type");re&&re.match(/image/)&&(r+='<img style="width:256px" src=\''+oe+"' />"),D=oe}}break;case"author":r+="<p><b>author:</b>"+C+"</p>";break;case"time":r+="<p><b>time:</b>"+C+"</p>";break;case"lat":p=C;break;case"long":m=C,I=!0;break;case"box":X++,K=!0;break;case"styleurl":d=C,l=h.styles[d];break;case"stylemap":var ae=!1;for(_=e.childNodes.item(R),T=0;T<_.childNodes.length&&!ae;T++){var ne=_.childNodes[T];for(N=0;N<ne.childNodes.length&&!ae;N++){var le=ne.childNodes[N].nodeName;"Style"==le&&(l=this.handleStyle(ne.childNodes[N],null,l),ae=!0)}}break;case"Style":case"style":d=null,l=this.handleStyle(e.childNodes.item(R),null,l)}if(K){for(M=C.split(" "),A="",$=0;$<M.length-1;$++)isNaN(parseFloat(M[$]))||isNaN(parseFloat(M[$+1]))||(A+=""+parseFloat(M[$+1])+","+parseFloat(M[$]),A+=" ",$++);""!=A&&(_=this.parseXML("<coordinates>"+A+"</coordinates>"),H.push&&H.push(_))}}!n&&a&&(n=a),o&&(l=o);var he;if(0!=this.iwheight&&(he="height:"+this.iwheight+"px"),"undefined"==typeof r||!r||this.opts.makedescription){var pe=h.makeDescription(e,"");r="<div id='currentpopup' style='overflow:auto;"+he+"' >"+pe.desc+"</div> ",!n&&pe.title&&(n=pe.title,n.length+i>this.maxtitlewidth&&(this.maxtitlewidth=n.length+i))}else this.iwheight&&(r="<div id='currentpopup' style='overflow:auto;"+he+"' >"+r+"</div> ");if(0==H.length&&"undefined"!=typeof p)w=new google.maps.LatLng(p,m),this.overlayman.folderBounds[s].extend(w),de||("undefined"==typeof n&&(n=GeoXml.stripHTML(r),r=""),n==r&&(r=""),h.opts.createmarker?h.opts.createmarker(w,n,r,d,s,l,g,G,D,j):h.createMarker(w,n,r,d,s,l,g,G,D,j));else for(var me=0;me<H.length;me++){var de=!1;H[me].parentNode&&H[me].parentNode.nodeName.match(/^(gml:Box|gml:Envelope)/i)&&(de=!0),A=this.getText(H[me]),A+=" ",A=A.replace(/(\s)+/g," "),A=A.replace(/^ /,""),A=A.replace(/, /,",");var ge=A.split(" ");if(1==ge.length||""==ge[1])E=ge[0].split(","),w=new google.maps.LatLng(parseFloat(E[1]),parseFloat(E[0])),this.overlayman.folderBounds[s].extend(w),de||("undefined"==typeof n&&(n=GeoXml.stripHTML(r),r=""),n==r&&(r=""),h.opts.createmarker?h.opts.createmarker(w,n,r,d,s,l,g,G,D,j):h.createMarker(w,n,r,d,s,l,g,G,D,j));else{for(P=[],k=new google.maps.LatLngBounds,B=0;B<ge.length-1;B++)E=ge[B].split(","),w=new google.maps.LatLng(parseFloat(E[1]),parseFloat(E[0])),P.push(w),k.extend(w);this.overlayman.folderBounds[s].extend(k.getSouthWest()),this.overlayman.folderBounds[s].extend(k.getNorthEast()),this.bounds.extend(k.getSouthWest()),this.bounds.extend(k.getNorthEast()),de||z.push(P)}}if(z&&!(z.length<1)){var V=H[0].parentNode.nodeName;(V.match(/^(LineString)/i)||V.match(/^(gml:LineString)/i))&&(l?(b=l.strokeWeight,v=l.strokeColor,u=l.strokeOpacity):(b=this.style.width,v=this.style.color,u=this.style.opacity),"undefined"==typeof n&&(n=GeoXml.stripHTML(r),r=""),n==r&&(r=""),h.opts.createpolyline?h.opts.createpolyline(z,v,b,u,k,n,r,s,g,G):h.createPolyline(z,v,b,u,k,n,r,s,g,G)),(V.match(/^(LinearRing)/i)||V.match(/^(gml:LinearRing)/i))&&(l&&(b=l.strokeWeight,v=l.strokeColor,u=l.strokeOpacity,y=l.fillOpacity,f=l.fillColor,x=l.fill,c=l.outline),"undefined"==typeof x&&(x=1),"undefined"==typeof v&&(v=this.style.color),"undefined"==typeof f&&(f=this.randomColor()),"undefined"==typeof n&&(n=GeoXml.stripHTML(r),r=""),n==r&&(r=""),h.opts.createpolygon?h.opts.createpolygon(z,v,b,u,f,y,k,n,r,j,s,g,x,c,G):h.createPolygon(z,v,b,u,f,y,k,n,r,j,s,g,x,c,G))}},GeoXml.prototype.makeIcon=function(e,t,s,i){var o,r=1,a={x:.5,y:1};if(i){var n=i.getAttribute("xunits"),l=i.getAttribute("x"),h=32,p=32;this.opts.baseicon&&(h=this.opts.baseicon.size.width,p=this.opts.baseicon.size.height),"fraction"==n?a.x=parseFloat(l):a.x=parseFloat(l)/h;var m=i.getAttribute("yunits"),d=i.getAttribute("y");"fraction"==m?a.y=1-parseFloat(d):a.y=1-parseFloat(d)/p}if("number"==typeof s&&(r=s),t||(e?e.url&&(t=e.url,r=e.scale):(t="http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png",o=new google.maps.MarkerImage(t,new google.maps.Size(16*r,16*r)),o.origin=new google.maps.Point(0*r,0*r),o.anchor=new google.maps.Point(16*r*a.x,16*r*a.y))),t)if(this.opts.baseicon){var g=this.opts.baseicon;if(o=new google.maps.MarkerImage(t,this.opts.baseicon.size),o.origin=this.opts.baseicon.origin,o.anchor=new google.maps.Point(this.opts.baseicon.size.width*r*a.x,this.opts.baseicon.size.height*r*a.y),this.opts.baseicon.scaledSize)o.scaledSize=this.opts.baseicon.scaledSize;else{var c=g.size.width*r,u=g.size.height*r;o.scaledSize=new google.maps.Size(c,u)}o.url=t}else{if(o=new google.maps.MarkerImage(t,new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(32*r*a.x,32*r*a.y),new google.maps.Size(32*r,32*r)),this.opts.printgif){var f=t.split("/"),y=f[f.length-1];y=this.opts.printgifpath+y.replace(/.png/i,".gif"),o.printImage=y,o.mozPrintImage=y}if(this.opts.noshadow)o.shadow="";else if(t.indexOf("/red.png")>-1||t.indexOf("/blue.png")>-1||t.indexOf("/green.png")>-1||t.indexOf("/yellow.png")>-1||t.indexOf("/lightblue.png")>-1||t.indexOf("/purple.png")>-1||t.indexOf("/orange.png")>-1||t.indexOf("/pink.png")>-1||t.indexOf("-dot.png")>-1)o.shadow="http://maps.google.com/mapfiles/ms/icons/msmarker.shadow.png";else if(t.indexOf("-pushpin.png")>-1||t.indexOf("/pause.png")>-1||t.indexOf("/go.png")>-1||t.indexOf("/stop.png")>-1)o.shadow="http://maps.google.com/mapfiles/ms/icons/pushpin_shadow.png";else{var v=t.replace(".png",".shadow.png");v.indexOf(".jpg")&&(v=""),o.shadow=v}}return this.opts.noshadow&&(o.shadow=""),o},GeoXml.prototype.handleStyle=function(e,t,s){var i,o,r,a,n,l,h,p,m,d,g,c=this,u=e.getElementsByTagName("IconStyle");h=1,g=1,myscale=1;var f="#";if(t&&(f="#"+t),u.length>0&&(p=this.getText(u[0].getElementsByTagName("href")[0]),s&&(p=s.url),p)){var y=parseFloat(this.getText(u[0].getElementsByTagName("scale")[0]),10);y&&(myscale=y);

var v=u[0].getElementsByTagName("hotSpot");i=this.makeIcon(s,p,myscale,v[0]),i.scale=myscale,c.styles[f]=i}var b=e.getElementsByTagName("LabelStyle");if(b.length>0){var y=parseFloat(this.getText(b[0].getElementsByTagName("scale")[0]),10);m=this.getText(b[0].getElementsByTagName("color")[0]),r=m.substr(0,2),a=m.substr(2,2),n=m.substr(4,2),l=m.substr(6,2),m="#"+l+n+a,o=parseInt(r,16)/256,c.opts.overrideOpacity&&(o=c.opts.overrideOpacity),c.styles[f]||(c.styles[f]={}),i=c.styles[f],c.styles[f].textColor=m,0==y&&(y=1),c.styles[f].scale=y}var k=e.getElementsByTagName("LineStyle");if(k.length>0){var x=parseInt(this.getText(k[0].getElementsByTagName("width")[0]),10);1>x&&(x=1),m=this.getText(k[0].getElementsByTagName("color")[0]),r=m.substr(0,2),a=m.substr(2,2),n=m.substr(4,2),l=m.substr(6,2),m="#"+l+n+a,o=parseInt(r,16)/256,c.opts.overrideOpacity&&(o=c.opts.overrideOpacity),c.styles[f]||(c.styles[f]={}),c.styles[f].strokeColor=m,c.styles[f].strokeWeight=x,c.styles[f].strokeOpacity=o}var w=e.getElementsByTagName("PolyStyle");return w.length>0&&(m=this.getText(w[0].getElementsByTagName("color")[0]),d=this.getText(w[0].getElementsByTagName("colorMode")[0]),0!=w[0].getElementsByTagName("fill").length&&(h=parseInt(this.getText(w[0].getElementsByTagName("fill")[0]),10)),0!=w[0].getElementsByTagName("outline").length&&(g=parseInt(this.getText(w[0].getElementsByTagName("outline")[0]),10)),r=m.substr(0,2),a=m.substr(2,2),n=m.substr(4,2),l=m.substr(6,2),m="#"+l+n+a,o=parseInt(r,16)/256,c.opts.overrideOpacity&&(o=c.opts.overrideOpacity),c.styles[f]||(c.styles[f]={}),c.styles[f].fill=h,c.styles[f].outline=g,"random"!=d?c.styles[f].fillColor=m:c.styles[f].colortint=m,c.styles[f].fillOpacity=o,h||(c.styles[f].fillOpacity=0),g||(c.styles[f].strokeOpacity=0)),i=c.styles[f]},GeoXml.prototype.processKML=function(e,t,s,i,o,r){var a,n,l=this.map,h=this.forcefoldersopen;"kml"==e.nodeName&&(a=this.docicon),"Document"==e.nodeName&&(a=this.kmlicon),"Folder"==e.nodeName&&(a=this.foldericon,n=s);var p,m=[],d=[],g="",c="",u=!1;this.hideall||(u=!0);for(var f,y,v,b,k,w,M,_,L=!1,C=!1,S=[],O=null,B=1,T=!1,N=!1,$=[],I=[],P=(e.getAttribute("id"),0);P<e.childNodes.length;P++){{var z=e.childNodes.item(P),E=z.nodeName;z.nodeValue}switch(E){case"name":case"title":s=this.getText(z),s.length+o>this.maxtitlewidth&&(this.maxtitlewidth=s.length+o);break;case"Folder":case"Document":d.push(z);break;case"GroundOverlay":f=this.getText(z.getElementsByTagName("href")[0]);var G=parseFloat(this.getText(z.getElementsByTagName("north")[0])),X=parseFloat(this.getText(z.getElementsByTagName("south")[0])),W=parseFloat(this.getText(z.getElementsByTagName("east")[0])),F=parseFloat(this.getText(z.getElementsByTagName("west")[0])),A=this.getText(z.getElementsByTagName("attribution")[0]);_=new google.maps.LatLng(X,F),M=new google.maps.LatLng(G,W),this.bounds.extend(_),this.bounds.extend(M),b=this.getText(z.getElementsByTagName("color")[0]),B=parseInt(b.substring(1,3),16)/256,v=this.getText(z.getElementsByTagName("name")[0]);var D=/arcimsproxy/i;if(f.match(D))f+="&bbox="+F+","+X+","+W+","+G+"&response=img",y=new google.maps.LatLngBounds(_,M),T=!0,k=this.makeWMSTileLayer(f,u,v,B,A,s,y),k&&(k.bounds=y,k.title=v,k.opacity=B,k.visible=u,k.url=f,!this.quiet,$.push(k));else{var j=/request=getmap/i;f.match(j)?(f+="&bbox="+F+","+X+","+W+","+G,y=new google.maps.LatLngBounds(_,M),T=!0,k=this.makeWMSTileLayer(f,u,v,B,A,s,y),k&&(k.bounds=y,k.title=v,k.opacity=B,k.visible=u,k.url=f,$.push(k))):(y=new google.maps.LatLngBounds(_,M),O=new google.maps.GroundOverlay(f,y),O.url=f,O.title=v,O.visible=u,O.bounds=y,O.getBounds=function(){return this.bounds},L=!0,N=!0,I.push(O))}break;case"NetworkLink":S.push(this.getText(z.getElementsByTagName("href")[0])),C=!0;break;case"description":case"Description":g=GeoXml.getDescription(z);break;case"open":"1"==this.getText(z)&&(h=!0),"0"==this.getText(z)&&(h=this.forcefoldersopen);break;case"visibility":"0"==this.getText(z)&&(u=!1);break;case"snippet":case"Snippet":c=GeoXml.stripHTML(this.getText(z)),c=c.replace(/\n/g,"");break;default:for(var H=0;H<t.length;H++)if(E==t[H]){m.push(z);break}}}var Z,U=this.overlayman.folders.length,R=r;if(d.length>1||m.length||O||T){this.overlayman.folders.push([]),this.overlayman.subfolders.push([]),this.overlayman.folderhtml.push([]),this.overlayman.folderhtmlast.push(0),this.overlayman.folderBounds.push(new google.maps.LatLngBounds),this.kml.push(new KMLObj(s,g,!1,U)),R=this.kml.length-1;var V=!1;Z=this.createFolder(U,s,i,a,g,c,!0,u,V)}else Z=i;if(("Folder"==e.nodeName||"Document"==e.nodeName)&&(this.kml[R].open=h,this.kml[R].folderid=Z),(O||T)&&(this.kml[this.kml.length-1].visibility=u,this.kml[this.kml.length-1].groundOverlays.push({url:f,bounds:y})),C){var J=/&amp;/g;for(x=0;x<S.length;x++){f=S[x],f=f.replace(J,"&");var q=/\n/g;f=f.replace(q,"");var K=/'/g;s=s.replace(K,"&#39;"),this.progress++;var Y=this.myvar+".loadXMLUrl('"+f+"','"+s+"',null,null,'"+i+"');";setTimeout(Y,1e3)}}if(T&&$.length)for(var Q=0;Q<$.length;Q++){var k=$[Q],ee="";if(this.basesidebar){var w=this.overlayman.markers.length;if(!this.nolegend){var te=k.url.replace(/height=(\d)+/i,"height=100");te=te.replace(/width=(\d)+/i,"width=100"),ee='<img src="'+te+'" style="width:100px" />'}}this.sidebarsnippet&&""==c&&(c=GeoXml.stripHTML(g),c=c.substring(0,40)),parm=this.myvar+"$$$"+k.title+"$$$tiledoverlay$$$"+w+"$$$"+ee+"$$$"+k.visible+"$$$"+(this.baseLayers.length-1)+"$$$"+c;var l=(k.desc,this.map);google.maps.event.addListener(k,"zoomto",function(){l.fitBounds(this.getBounds())}),this.overlayman.addMarker(k,s,U,parm,!0,!0)}if(N&&I.length)for(var se=0;se<I.length;se++){if(this.basesidebar){var w=this.overlayman.markers.length,ee='<span style="background-color:black;border:2px solid brown;">&nbsp;&nbsp;&nbsp;&nbsp;</span> ';this.sidebarsnippet&&""==c&&(c=GeoXml.stripHTML(g),c=c.substring(0,40)),parm=this.myvar+"$$$"+I[se].title+"$$$polygon$$$"+w+"$$$"+ee+"$$$"+I[se].visible+"$$$null$$$"+c;var l=(I[se].desc,this.map);google.maps.event.addListener(I[se],"zoomto",function(){this.map.fitBounds(I[se].getBounds())}),this.overlayman.folderBounds[U].extend(I[se].getBounds().getSouthWest()),this.overlayman.folderBounds[U].extend(I[se].getBounds().getNorthEast()),L=!0,this.overlayman.addMarker(I[se],s,U,parm,u)}I[se].setMap(this.map)}for(p=0;p<m.length;p++)this.handlePlacemark(m[p],U,o+1);var ie=0;for(p=0;p<d.length;p++){var oe=this.processKML(d[p],t,s,Z,o+1,R);if("number"==typeof oe&&oe!=U){var re=this.overlayman.folderBounds[oe];if(re){var _=this.overlayman.folderBounds[oe].getSouthWest(),M=this.overlayman.folderBounds[oe].getNorthEast();this.overlayman.folderBounds[U].extend(_),this.overlayman.folderBounds[U].extend(M)}else this.overlayman.folderBounds[oe]=new google.maps.LatLngBounds;this.overlayman.subfolders[U].push(oe),oe!=U&&this.kml[U].folders.push(oe),ie++}}return(ie||m.length||L)&&(this.bounds.extend(this.overlayman.folderBounds[U].getSouthWest()),this.bounds.extend(this.overlayman.folderBounds[U].getNorthEast())),0==d.length&&0==m.length&&this.ParseURL(),U},GeoXml.prototype.processGPX=function(e,t,s,i){var o;"gpx"==e.nodeName&&(o=this.gmlicon),("rte"==e.nodeName||"trk"==e.nodeName||"trkseg"==e.nodeName)&&(o=this.foldericon);var r,a,n,l,h=[],p=[],m="",d="",g=this.forcefoldersopen;this.showLabels=!1;for(var c="",u=!0,f=0;f<e.childNodes.length;f++){var y=e.childNodes.item(f),v=y.nodeName;("name"==v||"title"==v)&&(t=this.getText(y),t.length+i>this.maxtitlewidth&&(this.maxtitlewidth=t.length+i)),"rte"==v&&p.push(y),"trk"==v&&p.push(y),"trkseg"==v&&p.push(y),"trkpt"==v&&(h.push(y),l=y.getAttribute("lat"),"undefined"!=typeof l&&(n=l),l=y.getAttribute("lon"),"undefined"!=typeof l&&(a=l,c+=a+","+n+" ")),"rtept"==v&&(h.push(y),l=y.getAttribute("lat"),"undefined"!=typeof l&&(n=l),l=y.getAttribute("lon"),"undefined"!=typeof l&&(a=l,c+=a+","+n+" ")),"wpt"==v&&h.push(y),("description"==v||"desc"==v)&&(m=this.getText(y))}if(c.length){var b='<?xml version="1.0"?><Placemark><name>'+t+"</name><description>"+m+"</description><LineString><coordinates>"+c+"</coordinates></LineString></Placemark>",k=this.parseXML(b).documentElement;h.push(k)}var x,w=this.overlayman.folders.length;for(h.length||"gpx"==e.nodeName?(this.overlayman.folders.push([]),this.overlayman.subfolders.push([]),this.overlayman.folderhtml.push([]),this.overlayman.folderhtmlast.push(0),this.overlayman.folderBounds.push(new google.maps.LatLngBounds),this.kml.push(new KMLObj(t,m,g,w)),x=this.createFolder(w,t,s,o,m,d,!0,u,1==h.length)):x=s,r=0;r<h.length;r++)this.handlePlacemark(h[r],w,i+1);for(r=0;r<p.length;r++){var M=this.processGPX(p[r],t,x,i+1);this.overlayman.subfolders[w].push(M),this.overlayman.folderBounds[w].extend(this.overlayman.folderBounds[M].getSouthWest()),this.overlayman.folderBounds[w].extend(this.overlayman.folderBounds[M].getNorthEast())}return this.overlayman.folderBounds[w]&&(this.bounds.extend(this.overlayman.folderBounds[w].getSouthWest()),this.bounds.extend(this.overlayman.folderBounds[w].getNorthEast())),w},GeoXml.prototype.ParseURL=function(){for(var e=topwin.location.search.substring(1),t=e.split("&"),s=this.overlayman.markers,i=0;i<t.length;i++){var o,r=t[i].indexOf("="),a=t[i].substring(0,r).toLowerCase(),n=unescape(t[i].substring(r+1)),l=0;if(n||(this.overlayman.paren.openbyid&&(n=this.overlayman.paren.openbyid,a="openbyid"),this.overlayman.paren.openbyname&&(n=this.overlayman.paren.openbyname,a="openbyname")),n)switch(a){case"openbyid":for(l=0;l<s.length;l++)if(o=s[l].id,o==n){this.overlayman.markers[l].setVisible(!0),this.overlayman.markers[l].hidden=!1,google.maps.event.trigger(this.overlayman.markers[l],"click");break}break;case"kml":case"url":case"src":case"geoxml":this.urls.push(n),this.parse();break;case"openbyname":for(l=0;l<s.length;l++)if(o=s[l].title,o==n){this.overlayman.markers[l].setVisible(!0),this.overlayman.markers[l].hidden=!1,google.maps.event.trigger(this.overlayman.markers[l],"click");break}}}},GeoXml.prototype.processing=function(e,t,s,i,o){this.overlayman.miStart=new Date,i||(i=t);var r=this;o||(o=0);var a,n,l=e.documentElement;if(!l)return 0;var h,p,m,d=[],g=l.nodeName,c=r.forcefoldersopen,u=g.split(":");u.length>1&&(g=u[1]);var f,y,v;if(r.wfs=!1,"FeatureCollection"==g&&(f=Lance$(r.basesidebar),t||(t=h),"undefined"==typeof t&&(t="Un-named GML"),r.isWFS=!0,t.length>r.maxtitlewidth&&(r.maxtitlewidth=t.length),f&&(f.style.display=""),n=r.overlayman.folders.length,r.processGML(l,t,s,i,r.kml.length-1),r.kml[0].folders.push(n)),"gpx"==g)t||(t=h),"undefined"==typeof t&&(t="Un-named GPX"),r.title=t,t.length>r.maxtitlewidth&&(r.maxtitlewidth=t.length),f=Lance$(r.basesidebar),f&&(f.style.display=""),n=r.overlayman.folders.length,r.processGPX(l,t,r.basesidebar,o),r.kml[0].folders.push(n);else if("kml"==g){for(m=l.getElementsByTagName("Style"),v=0;v<m.length;v++)y=m[v].getAttribute("id"),y&&r.handleStyle(m[v],y);for(m=l.getElementsByTagName("StyleMap"),v=0;v<m.length;v++)if(y=m[v].getAttribute("id"))for(var b=!1,k=m[v],x=0;x<k.childNodes.length&&!b;x++)for(var w=k.childNodes[x],M=0;M<w.childNodes.length&&!b;M++){var _=w.childNodes[M].nodeName;if("styleUrl"==_){var L=this.getText(w.childNodes[M]);r.styles["#"+y]=r.styles[L],b=!0}"Style"==_&&(r.handleStyle(w.childNodes[M],y),b=!0)}t||(t=h),"undefined"==typeof t&&(t="KML Document"),r.title=t,t.length>r.maxtitlewidth&&(r.maxtitlewidth=t.length);for(var C=["Placemark"],S=l.getElementsByTagName("Schema"),O=0;O<S.length;O++)p=S[O].getAttribute("parent"),"Placemark"==p&&(p=S[O].getAttribute("name"),C.push(p));f=Lance$(r.basesidebar),f&&(f.style.display=""),n=r.overlayman.folders.length;{var B=r.kml.length-1;r.processKML(l,C,t,r.basesidebar,n,B)}r.kml[B].folders.push(n)}else{d=l.getElementsByTagName("item"),d.length<1&&(d=l.getElementsByTagName("atom")),d.length<1&&(d=l.getElementsByTagName("entry")),t||(t=h),"undefined"==typeof t&&(t="News Feed"),r.title=t,t.length>r.maxtitlewidth&&(r.maxtitlewidth=t.length);var T;if(r.opts.baseicon?(T=r.opts.baseicon,a=r.rssicon.replace(".png",".shadow.png"),T.shadow=a+"_shadow.png"):(T=new google.maps.MarkerImage(r.rssicon,new google.maps.Size(32,32)),T.origin=new google.maps.Point(0,0),T.anchor=new google.maps.Point(16,32),T.url=r.rssicon,a=r.rssicon.replace(".png",".shadow.png"),T.shadow=a+"_shadow.png"),T.strokeColor="#00FFFF",T.strokeWeight="3",T.strokeOpacity=.5,i||(i="RSS feed"),r.kml[0].folders.push(r.overlayman.folders.length),d.length){if(f=Lance$(r.basesidebar),f&&(f.style.display=""),r.overlayman.folders.push([]),r.overlayman.folderhtml.push([]),r.overlayman.folderhtmlast.push(0),r.overlayman.folderBounds.push(new google.maps.LatLngBounds),n=r.overlayman.folders.length-1,r.kml.push(new KMLObj(t,i,c,n)),r.kml[r.kml.length-1].open=c,r.basesidebar){var N=!0;r.hideall&&(N=!1);{r.createFolder(n,t,r.basesidebar,r.globalicon,i,null,c,N)}}for(v=0;v<d.length;v++)r.handlePlacemark(d[v],n,o,T)}}r.progress--,0==r.progress&&(google.maps.event.trigger(r,"parsed"),!r.opts.sidebarid,r.opts.nozoom||r.basesidebar||r.map.fitBounds(r.bounds))},GeoXml.prototype.createFolder=function(e,t,s,i,o,r,a,n,l){var h=Lance$(s);a=!0;var p=this.myvar+"_folder"+e,m="";n&&(m=" checked "),this.overlayman.folderhtml[p]="";var d="display:block",g="font-weight:normal";if("undefined"!=typeof a&&a||(d="display:none",g="font-weight:bold"),o&&""!=o||(o=t),o=escape(o),1==this.suppressFolders||l)c='<span onclick="'+this.myvar+".overlayman.zoomToFolder("+e+");"+this.myvar+".mb.showMess('"+o+'\',3000);return false;" id="'+p+'" style="'+d+'"></span>';else{var c="<ul>";c+='<div id="'+p+'" style="'+d+'"></div></ul>'}return h&&(h.innerHTML=h.innerHTML+c),p},GeoXml.prototype.processGML=function(e,t,s,i,o){var r,a,n,l,h,p,m,d,g,c=this,u=[],f=!1,y=0,v=0,b=1,k=1,x=t,w=!0;this.showLabels=!1,this.hideall&&(w=!1);for(var M,_,L,C=c.allfoldersopen,S=0;S<e.childNodes.length;S++){var O=e.childNodes.item(S).nodeName,B=e.childNodes.item(S);if("gml:boundedBy"==O||"boundedBy"==O)for(var T=0;T<B.childNodes.length;T++){var N=B.childNodes.item(T).nodeName,$=/CRS:84|(4326|4269)$/i;if("Box"==N||"gml:Box"==N){if(L=B.childNodes.item(T),r=B.childNodes.item(T).getAttribute("srsName"),r.match($))f=!0;else for(alert("SRSname ="+r+"; attempting to create transform"),d=0;d<L.childNodes.length;d++)l=L.childNodes.item(d),("gml:coordinates"==l.nodeName||"coordinates"==l.nodeName)&&(h=this.getText(l),n=h.split(" "),M=n[0].split(","),_=n[1].split(","),b=(parseFloat(_[0])-parseFloat(M[0]))/(s.xmax-s.xmin),k=(parseFloat(_[1])-parseFloat(M[1]))/(s.ymax-s.ymin),y=M[0]/b-s.xmin,v=M[1]/k-s.ymin);break}if("Envelope"==N||"gml:Envelope"==N)if(L=B.childNodes.item(T),r=B.childNodes.item(T).getAttribute("srsName"),r.match($))f=!0;else for(alert("SRSname ="+r+"; attempting to create transform"),d=0;d<L.childNodes.length;d++)if(l=L.childNodes.item(d),"gml:coordinates"==l.nodeName||"coordinates"==l.nodeName){n=l.split(" ");for(var I={xmin:1e8,ymin:1e8,xmax:-1e8,ymax:-1e8},P=0;P<n.length-1;P++)a=n[P].split(","),p=parseFloat(a[0]),m=parseFloat(a[1]),p<I.xmin&&(I.xmin=p),m<I.ymin&&(I.ymin=m),p>I.xmax&&(I.xmax=p),m>I.ymax&&(I.ymax=m);b=(I.xmax-I.xmin)/(s.xmax-s.xmin),k=(I.ymax-I.ymin)/(s.ymax-s.ymin),y=I.xmin/b-s.xmin,v=I.ymin/k-s.ymin}break}("gml:featureMember"==O||"featureMember"==O)&&u.push(B)}var z;if(t||(t=x),this.title=t,u.length<1)alert("No features found in "+t);else{this.overlayman.folders.push([]),this.overlayman.folderhtml.push([]),this.overlayman.folderhtmlast.push(0),this.overlayman.folderBounds.push(new google.maps.LatLngBounds);var E=this.overlayman.folders.length-1;if(this.basesidebar&&(z=this.createFolder(E,t,this.basesidebar,this.gmlicon,i,null,C,w,1==u.length)),this.kml.push(new KMLObj(t,i,!0,E)),this.kml[o].open=c.opts.allfoldersopen,this.kml[o].folderid=z,f)for(g=0;g<u.length;g++)this.handlePlacemark(u[g],E,0);else{var G={xs:b,ys:k,x:y,y:v};for(g=0;g<u.length;g++)this.handleGeomark(u[g],E,G,0)}}},google.maps.Polyline.prototype.getBounds=function(){return"undefined"!=typeof this.bounds?this.bounds:this.computeBounds()},google.maps.Polyline.prototype.getPosition=function(){var e=this.getPath();return e.getAt(Math.round(e.getLength()/2))},google.maps.Polyline.prototype.computeBounds=function(){for(var e=new google.maps.LatLngBounds,t=this.getPath(),s=0;s<t.getLength();s++){var i=t.getAt(s);i&&e.extend(i)}return this.bounds=e,e},google.maps.Polygon.prototype.getPosition=function(){return this.getBounds().getCenter()},google.maps.Polygon.prototype.computeBounds=function(){for(var e=new google.maps.LatLngBounds,t=this.getPaths(),s=0;s<t.getLength();s++)for(var i=t.getAt(s),o=0;o<i.getLength();o++){var r=i.getAt(o);r&&e.extend(r)}return this.bounds=e,e},google.maps.Polygon.prototype.getBounds=function(){return"undefined"!=typeof this.bounds?this.bounds:this.computeBounds()},google.maps.Polygon.prototype.getCenter=function(){return this.getBounds().getCenter()},OverlayManagerView.prototype=new google.maps.OverlayView,OverlayManagerView.prototype.onAdd=function(){},OverlayManagerView.prototype.draw=function(){},OverlayManagerView.prototype.onRemove=function(){},OverlayManager=function(e,t,s){this.myvar=t.myvar,this.paren=t,this.map=e,this.markers=[],this.byid=[],this.byname=[],this.groups=[],this.timeout=null,this.folders=[],this.folderBounds=[],this.folderhtml=[],this.folderhtmlast=[],this.subfolders=[],this.currentZoomLevel=e.getZoom(),this.isParsed=!1,this.overlayview=new OverlayManagerView(e),this.defaultMaxVisibleMarkers=400,this.defaultGridSize=12,this.defaultMinMarkersPerCluster=5,this.defaultMaxLinesPerInfoBox=15,this.defaultClusterZoom="dblclick",this.defaultClusterInfoWindow="click",this.defaultClusterMarkerZoom=16,this.defaultIcon=new google.maps.MarkerImage("http://maps.google.com/mapfiles/kml/paddle/blu-circle.png",new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(16,12),new google.maps.Size(32,32)),this.maxVisibleMarkers=s.maxVisibleMarkers||this.defaultMaxVisibleMarkers,this.gridSize=s.gridSize||this.defaultGridSize,this.minMarkersPerCluster=s.minMarkersPerCluster||this.defaultMinMarkersPerCluster,this.maxLinesPerInfoBox=s.maxLinesPerInfoBox||this.defaultMaxLinesPerInfoBox,this.ClusterZoom=s.ClusterZoom||this.defaultClusterZoom,this.ClusterInfoWindow=s.ClusterInfoWindow||this.defaultClusterInfoWindow,this.ClusterMarkerZoom=s.ClusterMarkerZoom||this.defaultClusterMarkerZoom,this.ClusterIconUrl=s.ClusterIconUrl||"http://www.dyasdesigns.com/tntmap/images/m",this.lang={txtzoomin:"",txtclustercount1:"...and",txtclustercount2:"more"},"undefined"!=typeof s.lang&&(this.lang.txtzoomin=s.lang.txtzoomin,this.lang.txtclustercount1=s.lang.txtclustercount1,this.lang.txtclustercount2=s.lang.txtclustercount2),this.icon=s.Icon||this.defaultIcon,this.optcluster={},this.optcluster.overlayman=this,this.optcluster.minimumClusterSize=this.minMarkersPerCluster,this.optcluster.gridSize=this.gridSize,this.optcluster.ClusterZoom=this.ClusterZoom,this.optcluster.ClusterInfoWindow=this.ClusterInfoWindow,this.optcluster.imagePath=this.ClusterIconUrl,this.cluster=new MarkerClusterer(this.map,{},this.optcluster,this.paren),google.maps.event.addListener(this.paren,"adjusted",OverlayManager.MakeCaller(OverlayManager.Display,this)),google.maps.event.addListener(e,"idle",OverlayManager.MakeCaller(OverlayManager.Display,this)),google.maps.event.addListener(e,"infowindowclose",OverlayManager.MakeCaller(OverlayManager.PopDown,this)),this.icon.pane=this.paren.markerpane},OverlayManager.prototype.SetIcon=function(e){this.icon=e},OverlayManager.prototype.SetMaxVisibleMarkers=function(e){this.maxVisibleMarkers=e},OverlayManager.prototype.SetMinMarkersPerCluster=function(e){this.minMarkersPerCluster=e},OverlayManager.prototype.SetMaxLinesPerInfoBox=function(e){this.maxLinesPerInfoBox=e},OverlayManager.prototype.addMarker=function(e,t,s,i,o,r){null!=e.setMap&&e.setMap(this.map),e.hidden=!1,1!=o&&(e.hidden=!0),this.paren.hideall&&(e.hidden=!0),e.title=t,this.folders[s].push(this.markers.length);var a=this.map.getBounds(),n=!1;if(a)if("undefined"==typeof e.getBounds)a.contains(e.getPosition())&&(n=!0);else{var l=e.getBounds();l.isEmpty()||a.intersects(l)&&(n=!0)}else n=!0;r&&(n=!0),this.markers.push(e),n&&(e.hidden?(e.setMap(null),e.onMap=!1,e.label&&e.label.setMap(null)):(e.setMap(this.map),e.onMap=!0,e.label&&e.label.setMap(this.map))),this.cluster.addMarker(e),this.DisplayLater(),i&&this.folderhtml[s].push(i)},OverlayManager.prototype.zoomToFolder=function(e){var t=this.folderBounds[e];this.map.fitBounds(t)},OverlayManager.prototype.RemoveMarker=function(e){for(var t=0;t<this.markers.length;++t)if(this.markers[t]==e){e.onMap&&e.setMap(null),e.label&&e.label.setMap(null);for(var s=0;s<this.groups.length;++s){var i=this.groups[s];if(null!=i){for(var o=0;o<i.markers.length;++o)if(i.markers[o]==e){i.markers[o]=null,--i.markerCount;break}0==i.markerCount?(this.ClearGroup(i),this.groups[s]=null):i==this.poppedUpCluster&&OverlayManager.RePop(this)}}this.markers[t]=null;break}this.cluster.removeMarker(e),this.DisplayLater()},OverlayManager.prototype.DisplayLater=function(){null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(OverlayManager.MakeCaller(OverlayManager.Display,this),50)},OverlayManager.Display=function(e){var t,s,i,o;if(clearTimeout(e.timeout),!e.paren.allRemoved){var r,a,n,l,h=!1,p=0;if(e.paren.basesidebar)for(s=0;s<e.folderhtml.length;s++){var m=e.folderhtml[s].length,d=e.folderhtmlast[s];if(m>d){var g=e.paren.myvar+"_folder"+s,c=Lance$(g);if(c){if(e.paren.opts.sortbyname)for(l=c.innerHTML,r=e.folderhtml[s].sort(),o=0;m>o;o++)a=r[o].split("$$$",8),l+=e.paren.sidebarfn(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);else for(l=c.innerHTML,r=e.folderhtml[s],o=d;m>o;o++)a=r[o].split("$$$",8),l+=e.paren.sidebarfn(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);e.folderhtmlast[s]=m,c.innerHTML=l,e.paren.forcefoldersopen&&(c.style.display="block"),h=!0,p=m}}}if(h&&p>0&&0==e.paren.progress){e.paren.setFolders(),google.maps.event.trigger(e.paren,"parsed"),!e.paren.opts.sidebarid;{var u=new Date;(u-e.miStart)/1e3+" seconds"}e.paren.ParseURL(),e.paren.opts.nozoom||e.paren.map.fitBounds(e.paren.bounds)}h&&"undefined"!=typeof resizeKML&&resizeKML();var f,y,v,b,k,x=!1,w=e.map.getZoom();if(w!=e.currentZoomLevel){for(x=!0,t=0;t<e.groups.length;++t)null!=e.groups[t]&&(e.ClearGroup(e.groups[t]),e.groups[t]=null);e.groups.length=0,e.currentZoomLevel=w}if(e.map.getBounds()&&(f=e.getMapBounds(e),y=f.getSouthWest(),v=f.getNorthEast(),b=v.lng()-y.lng(),k=v.lat()-y.lat()),f||!e.map||(f=e.getMapBounds(e))){var M=[],_=[],L=0;for(t=0;t<e.markers.length;++t)if(i=e.markers[t],n=!1,null!==i){var C=e.paren.myvar+"sb"+t;if("undefined"==typeof i.getBounds){var S=i.getPosition();f.contains(S)&&(n=!0,L++)}else{var O=i.getBounds();f.intersects(O)&&(n=!0)}Lance$(C)&&(n?Lance$(C).className="inView":Lance$(C).className="outView"),n&&0==i.hidden?M.push(t):_.push(t)}x&&(e.cluster.setMinimumClusterSize(L>e.maxVisibleMarkers?e.minMarkersPerCluster:e.maxVisibleMarkers),e.cluster.repaint()),OverlayManager.RePop(e)}}},OverlayManager.PopUp=function(e,t){for(x=0;x<e.cluster.clusters_.length&&t!=e.cluster.clusters_[x].clusterIcon_;x++);for(var s='<table style="font-size:10px" width="300">',i=0,o=0;o<t.cluster_.markers_.length;++o){var r=t.cluster_.markers_[o];if(null!=r&&(++i,s+='<tr><td><a href="javascript:OverlayManager.ZoomIntoMarker('+e.myvar+".overlayman.cluster.clusters_["+x+"].markers_["+o+'])">',s+=null!=r.smallImage?'<img src="'+r.smallImage+'">':'<img src="'+r.icon.url+'" width="'+r.icon.size.width/2+'" height="'+r.icon.size.height/2+'">',s+="</td><td>"+r.title+"</a></td></tr>",i==e.maxLinesPerInfoBox-1&&t.cluster_.markers_.length>e.maxLinesPerInfoBox)){s+='<tr><td colspan="2">'+e.lang.txtclustercount1+" "+(t.cluster_.markers_.length-i)+" "+e.lang.txtclustercount2+"</td></tr>";break}}s+='<tr><td colspan="2"><a href="javascript:OverlayManager.ZoomIntoCluster('+e.myvar+'.overlayman)">'+e.lang.txtzoomin+"</a></td></tr>",s+="</table>",e.paren.lastMarker&&e.paren.lastMarker.infoWindow&&e.paren.lastMarker.infoWindow.close();var a={content:s,pixelOffset:new google.maps.Size(0,2),position:t.cluster_.bounds_.getCenter()};e.paren.maxiwwidth&&(a.maxWidth=e.paren.maxiwwidth),t.infoWindow=new google.maps.InfoWindow(a),e.paren.lastMarker=t,e.paren.lastMarker.infoWindow.open(e.paren.map),e.poppedUpCluster=t},OverlayManager.ZoomIntoCluster=function(e){if(e.poppedUpCluster){var t=e.poppedUpCluster.cluster_.getMarkerClusterer();google.maps.event.trigger(t,t.ClusterZoom_,e.poppedUpCluster.cluster_),google.maps.event.trigger(t,"cluster"+t.ClusterZoom_,e.poppedUpCluster.cluster_),t.getZoomOnClick()&&(mz=t.getMaxZoom(),theBounds=e.poppedUpCluster.cluster_.getBounds(),t.getMap().fitBounds(theBounds),setTimeout(function(){t.getMap().fitBounds(theBounds),null!==mz&&t.getMap().getZoom()>mz&&t.getMap().setZoom(mz+1)},100))}},OverlayManager.ZoomIntoMarker=function(e){e&&(e.geoxml.map.setZoom(e.geoxml.overlayman.ClusterMarkerZoom),e.geoxml.map.setCenter(e.getPosition()))},OverlayManager.prototype.getMapBounds=function(e){var t;if(e.map.getZoom()>1){var s=e.map.getBounds();t="undefined"==typeof s?new google.maps.LatLngBounds(new google.maps.LatLng(-85.08136444384544,-178.48388434375),new google.maps.LatLng(85.02070771743472,178.00048865625)):new google.maps.LatLngBounds(s.getSouthWest(),s.getNorthEast())}else t=new google.maps.LatLngBounds(new google.maps.LatLng(-85.08136444384544,-178.48388434375),new google.maps.LatLng(85.02070771743472,178.00048865625));var i=e.overlayview.getProjection();if(i){var o=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),a=i.fromLatLngToDivPixel(o);a.x+=e.gridSize,a.y-=e.gridSize;var n=i.fromLatLngToDivPixel(r);n.x-=e.gridSize,n.y+=e.gridSize;var l=i.fromDivPixelToLatLng(a),h=i.fromDivPixelToLatLng(n);t.extend(l),t.extend(h)}return t},OverlayManager.RePop=function(e){},OverlayManager.PopDown=function(e){e.poppedUpCluster=null,e.paren.lastMarker=null},OverlayManager.prototype.ClearGroup=function(e){var t;for(t=0;t<e.markers.length;++t)null!=e.markers[t]&&(e.markers[t].inCluster=!1,e.markers[t]=null);e.markers.length=0,e.markerCount=0,e==this.poppedUpCluster&&this.map.closeInfoWindow(),e.onMap&&(e.marker.setMap(null),e.onMap=!1)},OverlayManager.MakeCaller=function(e,t){return function(){e(t)}},MessageBox=function(e,t,s,i){this.map=e,this.paren=t,this.myvar=t.myvar+"."+s,this.eraseMess=null,this.centerMe=null,this.id=this.myvar+"_message"},MessageBox.prototype.hideMess=function(){this.paren.quiet||(this.mb.style.visiblity="hidden",this.mb.style.left="-1200px",this.mb.style.top="-1200px")},MessageBox.prototype.centerThis=function(){var e={};if(e.x=this.map.getDiv().offsetWidth/2,e.y=this.map.getDiv().offsetHeight/2,this.mb||(this.mb=Lance$(this.id)),this.centerMe&&clearTimeout(this.centerMe),this.mb){var t=this.mb.offsetWidth;if(t>this.map.getDiv().offsetWidth)return t=parseInt(2*e.x/3,10),this.mb.style.width=t+"px",void(this.centerMe=setTimeout(this.myvar+".centerThis()",5));this.mb.style.left=e.x-t/2+"px",this.mb.style.top=e.y-20-this.mb.offsetHeight/2+"px"}else this.centerMe=setTimeout(this.myvar+".centerThis()",10)},MessageBox.prototype.showMess=function(e,t){if(this.paren.quiet)return void(console&&console.log(e));if(e=unescape(e),this.eraseMess&&clearTimeout(this.eraseMess),this.mb||(this.mb=Lance$(this.id)),this.mb){this.mb.innerHTML="<span>"+e+"</span>",t&&(this.eraseMess=setTimeout(this.myvar+".hideMess();",t));var s=this.map.getDiv(),i=this.mb.offsetWidth/2,o=this.mb.offsetHeight/2;this.mb.style.left=parseInt(s.offsetWidth/2-i)+"px",this.mb.style.top=parseInt(s.offsetHeight/2-o)+"px",this.mb.style.width="",this.mb.style.height="",this.centerMe=setTimeout(this.myvar+".centerThis()",5),this.mb.style.visibility="visible"}else{var s=document.createElement("div");s.innerHTML=e,s.id=this.myvar+"_message",s.style.position="absolute",s.style.backgroundColor=this.style.backgroundColor||"silver",s.style.opacity=this.style.opacity||.8,document.all&&(s.style.filter="alpha(opacity="+parseInt(100*s.style.opacity,10)+")"),s.style.color=this.style.color||"black",s.style.padding=this.style.padding||"6px",s.style.borderWidth=this.style.borderWidth||"3px",s.style.borderColor=this.style.borderColor||"",s.style.backgroundImage=this.style.backgroundImage||"",s.style.borderStyle=this.style.borderStyle||"outset",s.style.visibility="visible",s.style.left="-1200px",s.style.top="-1200px",this.centerMe=setTimeout(this.myvar+".centerThis()",5),s.style.zIndex=1e3,document.body.appendChild(s)}},GeoXml.prototype.loadJSONUrl=function(e,t,s,i,o){var r=this;GDownloadUrl(e,function(e){r.parseJSON(e,t,s,i,o)})},GeoXml.prototype.loadXMLUrl=function(e,t,s,i,o){var r=this;r.DownloadURL(e,function(e){var a=r.parseXML(e);r.processing(a,t,s,i,o)},t,!0)},GeoXml.prototype.upgradeLayer=function(e){for(var t=this.map.getMapTypes(),s=!1,i=0;i<t.length;i++)t[i]==this.baseLayers[e]&&(s=!0,this.map.removeMapType(this.baseLayers[e]));s||this.map.addMapType(this.baseLayers[e])},GeoXml.prototype.makeWMSTileLayer=function(e,t,s,i,o,r,a){gmapstring=new String(e),e=gmapstring.replace("&amp;","&");var n=e.split("?"),l=n[0]+"?";l=l.replace(/&request=getmap/i,""),l=l.replace(/&service=wms/i,"");var h="1.1.0",p="image/png",m="",d="",g=!1,c=.5;"undefined"!=typeof i&&(c=i);for(var u,f="-180,-90,180,90",y=n[1].split("&"),v="",b="",k="",x=0;x<y.length;x++){var w=(y[x],y[x].split("=")),M=w[0].toLowerCase();switch(M){case"version":h=w[1];break;case"bbox":f=w[1];break;case"width":case"height":break;case"service":break;case"servicename":v=w[1];break;case"atlasname":b=w[1];break;case"styles":m=w[1];break;case"layers":d=w[1];break;case"format":p=w[1];break;case"opacity":c=parseFloat(w[1]);break;case"crs":case"srs":u=w[1];break;case"gmcrs":k=w[1];break;case"queryable":g=w[1];break;case"getmap":break;case"service":break;default:w[0]&&(l+="&"+y[x])}}k&&(u=k);for(var _=f.split(","),L={w:parseFloat(_[0]),s:parseFloat(_[1]),e:parseFloat(_[2]),n:parseFloat(_[3])},C=L.n-L.s,S=0,O=180;O>=C;)O/=2,S++;S--,1>S&&(S=1),o||(o="Base Map from OGC WMS")},GeoXml.SEMI_MAJOR_AXIS=6378137,GeoXml.ECCENTRICITY=.08181919131087181,GeoXml.DEG2RAD=180/Math.PI,GeoXml.merc2Lon=function(e){return e*GeoXml.DEG2RAD*GeoXml.SEMI_MAJOR_AXIS},GeoXml.merc2Lat=function(e){var t=e*GeoXml.DEG2RAD,s=Math.sin(t);return GeoXml.SEMI_MAJOR_AXIS*Math.log(Math.tan((t+Math.PI/2)/2)*Math.pow((1-GeoXml.ECCENTRICITY*s)/(1+GeoXml.ECCENTRICITY*s),GeoXml.ECCENTRICITY/2))},GeoXml.prototype.toggleLabels=function(e){e?this.addLabels():this.removeLabels()},GeoXml.prototype.addLabels=function(){this.labels.onMap=!0,this.labels.setMap(this.map)},GeoXml.prototype.removeLabels=function(){this.labels.onMap=!1,this.labels.setMap(null)};var useLegacyLocalLoad=!0;GeoXml.prototype.DownloadURL=function(e,t,s,i){if(e){var o,r=e;if(!topwin.standalone&&this.proxy&&(r=r.replace("http://",""),r=r.replace("http%3A//",""),r=r.replace("https://",""),r=r.replace("https%3A//",""),r=this.proxy+"url="+escape(r)+this.token),!topwin.standalone&&!useLegacyLocalLoad||":"!=r.substring(2,3)){var a;a||"undefined"==typeof XMLHttpRequest?"undefined"!=typeof ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")):a=new XMLHttpRequest;var n=r;a.overrideMimeType&&a.overrideMimeType("text/xml"),a.open("GET",n,!0),a.onreadystatechange=function(){switch(a.readyState){case 4:if("undefined"!=typeof ActiveXObject){o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false";var e=a.responseText;t(e)}else if(a.responseXML)t(a.responseText);else if(200==a.status){var s=a.responseText,r=s.substring(0,400),n=s.substring(0,5);(!i||"<?xml"==n&&-1!=r.indexOf("kml"))&&t(s)}break;case 3:break;case 2:break;case 1:}};try{a.send(null)}catch(l){":"!=r.substring(2,3)||useLegacyLocalLoad||(useLegacyLocalLoad=!0,this.DownloadURL(r,t,s,i))}}else if(o=new ActiveXObject("Msxml2.DOMDocument.4.0"),o.validateOnParse=!1,o.async=!0,o.load(r),0!=o.parseError.errorCode){var h=o.parseError;alert("GeoXml file appears incorrect\n"+h.reason+" at line:"+h.line)}else t(o.doc);

}},GeoXml.Label=function(e,t,s,i,o){this.pos=e,this.txt_=t,this.cls_=s,this.map_=i,this.style_=o,this.div_=null,this.setMap(i)},GeoXml.Label.prototype=new google.maps.OverlayView,GeoXml.Label.prototype.onAdd=function(){var e=document.createElement("DIV");e.innerHTML=this.txt_,this.div_=e,this.div_.style.position="absolute";var t=this.getProjection(),s=t.fromLatLngToDivPixel(this.pos);this.div_.style.color=this.style_.color,this.div_.style.fontSize=this.style_.fontSize,this.div_.style.fontFamily=this.style_.fontFamily,e.style.left=s.x+"px",e.style.top=s.y+"px";var i=this.getPanes();i.floatPane.appendChild(e)},GeoXml.Label.prototype.getPosition=function(){return this.pos},GeoXml.Label.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.pos),s=this.div_;s.style.left=t.x+"px",s.style.top=t.y+"px"},GeoXml.Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},GeoXml.Label.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")},GeoXml.Label.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")},GeoXml.Label.prototype.toggle=function(){this.div_&&("hidden"==this.div_.style.visibility?this.show():this.hide())},GeoXml.Label.prototype.toggleDOM=function(){this.setMap(this.getMap()?null:this.map_)},GeoXml.tooltip=function(){var e,t,s,i,o,r="tooltip",a=3,n=3,l=300,h=10,p=20,m=95,d=0,g=document.all?!0:!1;return{show:function(n,h){null==e&&(e=document.createElement("div"),e.style.backgroundColor="white",e.style.padding="3px",e.style.position="absolute",e.style.zIndex=6e4,e.style.fontFamily="Arial,sans-serif",e.style.fontSize="10px",e.setAttribute("id",r),t=document.createElement("div"),t.setAttribute("id",r+"top"),s=document.createElement("div"),s.setAttribute("id",r+"cont"),i=document.createElement("div"),i.setAttribute("id",r+"bot"),e.appendChild(t),e.appendChild(s),e.appendChild(i),document.body.appendChild(e),e.style.opacity=0,e.style.filter="alpha(opacity=0)",document.onmousemove=this.pos),e.style.display="block",s.innerHTML=n,e.style.width=h?h+"px":"auto",!h&&g&&(t.style.display="none",i.style.display="none",e.style.width=e.offsetWidth,t.style.display="block",i.style.display="block"),e.offsetWidth>l&&(e.style.width=l+"px"),o=parseInt(e.offsetHeight)+a,clearInterval(e.timer),e.timer=setInterval(function(){GeoXml.tooltip.fade(1)},p)},pos:function(t){var s=g?event.clientY+document.documentElement.scrollTop:t.pageY,i=g?event.clientX+document.documentElement.scrollLeft:t.pageX;e.style.top=s-o+"px",e.style.left=i+n+"px"},fade:function(t){var s=d;if(s!=m&&1==t||0!=s&&-1==t){var i=h;h>m-s&&1==t?i=m-s:h>d&&-1==t&&(i=s),d=s+i*t,e.style.opacity=.01*d,e.style.filter="alpha(opacity="+d+")"}else clearInterval(e.timer),-1==t&&(e.style.display="none")},hide:function(){"undefined"!=typeof e&&(e.timer&&clearInterval(e.timer),e.timer=setInterval(function(){GeoXml.tooltip.fade(-1)},p))}}}(),ClusterIcon.prototype.onAdd=function(){var e,t,s=this,i=s.cluster_.getMarkerClusterer();this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),google.maps.event.addListener(this.getMap(),"bounds_changed",function(){t=e}),google.maps.event.addDomListener(this.div_,"mousedown",function(){e=!0,t=!1}),google.maps.event.addDomListener(this.div_,i.ClusterZoom_,function(i){if(e=!1,!t){var o,r,a=s.cluster_.getMarkerClusterer();google.maps.event.trigger(a,a.ClusterZoom_,s.cluster_),google.maps.event.trigger(a,"cluster"+a.ClusterZoom_,s.cluster_),a.getZoomOnClick()&&(r=a.getMaxZoom(),o=s.cluster_.getBounds(),a.getMap().fitBounds(o),setTimeout(function(){a.getMap().fitBounds(o),null!==r&&a.getMap().getZoom()>r&&a.getMap().setZoom(r+1)},100)),i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()}}),google.maps.event.addDomListener(this.div_,i.ClusterInfoWindow_,function(i){if(e=!1,!t){var o=s.cluster_.getMarkerClusterer();google.maps.event.trigger(o,o.ClusterInfoWindow_,s.cluster_),google.maps.event.trigger(o,"cluster"+o.ClusterInfoWindow_,s.cluster_),OverlayManager.PopUp(o.overlayman,s),i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var e=s.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"mouseover",s.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var e=s.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"mouseout",s.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.cluster_.printable_?this.div_.innerHTML="<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>":this.div_.innerHTML=this.sums_.text,"undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(e){this.sums_=e;var t=Math.max(0,e.index-1);t=Math.min(this.styles_.length-1,t);var s=this.styles_[t];this.url_=s.url,this.height_=s.height,this.width_=s.width,this.anchor_=s.anchor,this.anchorIcon_=s.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=s.textColor||"black",this.textSize_=s.textSize||11,this.textDecoration_=s.textDecoration||"none",this.fontWeight_=s.fontWeight||"bold",this.fontStyle_=s.fontStyle||"normal",this.fontFamily_=s.fontFamily||"Arial,sans-serif",this.backgroundPosition_=s.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];return this.cluster_.printable_||(t.push("background-image:url("+this.url_+");"),t.push("background-position:"+this.backgroundPosition_+";")),"object"==typeof this.anchor_?(t.push("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;":"height:"+this.height_+"px; line-height:"+this.height_+"px;"),t.push("number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;"),t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+"; text-decoration:"+this.textDecoration_+";"),t.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=this.anchorIcon_[1],t.y-=this.anchorIcon_[0],t},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var e,t=new google.maps.LatLngBounds(this.center_,this.center_),s=this.getMarkers();for(e=0;e<s.length;e++)t.extend(s[e].getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.infoWindow&&this.clusterIcon_.infoWindow.close(),this.clusterIcon_.setMap(null),this.clusterIcon_.onMap=!1,this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(e){var t,s,i;if(this.isMarkerAlreadyAdded_(e))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+e.getPosition().lat())/o,a=(this.center_.lng()*(o-1)+e.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,a),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();if(e.isAdded=!0,this.markers_.push(e),s=this.markers_.length,i=this.markerClusterer_.getMaxZoom(),null!==i&&this.map_.getZoom()>i)e.getMap()===this.map_||e.hidden||(e.setMap(this.map_),e.label&&e.label.setMap(this.map_));else if(s<this.minClusterSize_)e.getMap()===this.map_||e.hidden||(e.setMap(this.map_),e.label&&e.label.setMap(this.map_));else if(s===this.minClusterSize_)for(t=0;s>t;t++)this.markers_[t].setMap(null),e.label&&e.label.setMap(null);else e.setMap(null),e.label&&e.label.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.updateIcon_=function(){var e=this.markers_.length,t=this.markerClusterer_.getMaxZoom();if(null!==t&&this.map_.getZoom()>t)return void this.clusterIcon_.hide();if(e<this.minClusterSize_)return void this.clusterIcon_.hide();var s=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(i),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(e){var t;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(e);for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var e=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"idle",function(){e.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var e;for(e=0;e<this.markers_.length;e++)this.markers_[e].getMap()!==this.activeMap_&&(this.markers_[e].setMap(this.activeMap_),this.markers_[e].label&&this.markers_[e].label.setMap(this.activeMap_));for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var e,t;if(!(this.styles_.length>0))for(e=0;e<this.imageSizes_.length;e++)t=this.imageSizes_[e],this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},MarkerClusterer.prototype.fitMapToMarkers=function(){var e,t=this.getMarkers(),s=new google.maps.LatLngBounds;for(e=0;e<t.length;e++)s.extend(t[e].getPosition());this.getMap().fitBounds(s)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(e){this.title_=e},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(e){this.zoomOnClick_=e},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(e){this.averageCenter_=e},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(e){this.ignoreHidden_=e},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(e){this.imageExtension_=e},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(e){this.imagePath_=e},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(e){this.imageSizes_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getPrintable=function(){return this.printable_},MarkerClusterer.prototype.setPrintable=function(e){this.printable_=e},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(e){this.batchSizeIE_=e},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(e){this.clusterClass_=e},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(e,t){var s;for(s=0;s<e.length;s++)this.pushMarkerTo_(e[s]);t||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if("function"==typeof e.getDraggable&&e.getDraggable()){var t=this;google.maps.event.addListener(e,"dragend",function(){t.ready_&&(this.isAdded=!1,t.repaint())})}e.isAdded=!1,this.markers_.push(e)},MarkerClusterer.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},MarkerClusterer.prototype.removeMarkers=function(e,t){var s,i,o=!1;for(s=0;s<e.length;s++)i=this.removeMarker_(e[s]),o=o||i;return!t&&o&&this.repaint(),o},MarkerClusterer.prototype.removeMarker_=function(e){var t,s=-1;if(this.markers_.indexOf)s=this.markers_.indexOf(e);else for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t]){s=t;break}return-1===s?!1:(e.setMap(null),e.label&&e.label.setMap(null),this.markers_.splice(s,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var t;for(t=0;t<e.length;t++)e[t].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),i=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),o=t.fromLatLngToDivPixel(s);o.x+=this.gridSize_,o.y-=this.gridSize_;var r=t.fromLatLngToDivPixel(i);r.x-=this.gridSize_,r.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(o),n=t.fromDivPixelToLatLng(r);return e.extend(a),e.extend(n),e},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(e){var t,s;for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.markers_.length;t++)s=this.markers_[t],s.isAdded=!1,e&&(s.setMap(null),s.label&&s.label.setMap(null))},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){var s=6371,i=(t.lat()-e.lat())*Math.PI/180,o=(t.lng()-e.lng())*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),a=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),n=s*a;return n},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(e){var t,s,i,o,r=4e4,a=null;for(t=0;t<this.clusters_.length;t++)i=this.clusters_[t],o=i.getCenter(),o&&(s=this.distanceBetweenPoints_(o,e.getPosition()),r>s&&(r=s,a=i));a&&a.isMarkerInClusterBounds(e)?a.addMarker(e):(i=new Cluster(this),i.addMarker(e),this.clusters_.push(i))},MarkerClusterer.prototype.createClusters_=function(e){var t,s,i,o=this;if(this.ready_){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),i=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(i),a=Math.min(e+this.batchSize_,this.markers_.length);for(t=e;a>t;t++)s=this.markers_[t],!s.isAdded&&this.isMarkerInBounds_(s,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&s.getVisible())&&this.addToClosestCluster_(s);a<this.markers_.length?this.timerRefStatic=setTimeout(function(){o.createClusters_(a)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(e,t){return function(e){var t;for(t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.CALCULATOR=function(e,t){for(var s=0,i="",o=e.length.toString(),r=o;0!==r;)r=parseInt(r/10,10),s++;return s=Math.min(s,t),{text:o,index:s,title:i}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://www.dyasdesigns.com/tntmap/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];